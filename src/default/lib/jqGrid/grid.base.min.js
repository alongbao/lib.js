(function($){$.jgrid=$.jgrid||{},$.extend($.jgrid,{htmlDecode:function(a){if(a&&(a=="&nbsp;"||a=="&#160;"||a.length==1&&a.charCodeAt(0)==160))return"";return a?String(a).replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"'):a},htmlEncode:function(a){return a?String(a).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/\"/g,"&quot;"):a},format:function(a){var b=$.makeArray(arguments).slice(1);a===undefined&&(a="");return a.replace(/\{(\d+)\}/g,function(a,c){return b[c]})},getCellIndex:function(a){var b=$(a);if(b.is("tr"))return-1;b=(!b.is("td")&&!b.is("th")?b.closest("td,th"):b)[0];if($.browser.msie)return $.inArray(b,b.parentNode.cells);return b.cellIndex},stripHtml:function(a){a=a+"";var b=/<("[^"]*"|'[^']*'|[^'">])*>/gi;if(a){a=a.replace(b,"");return a&&a!=="&nbsp;"&&a!=="&#160;"?a.replace(/\"/g,"'"):""}return a},stringToDoc:function(a){var b;if(typeof a!="string")return a;try{var c=new DOMParser;b=c.parseFromString(a,"text/xml")}catch(d){b=new ActiveXObject("Microsoft.XMLDOM"),b.async=!1,b.loadXML(a)}return b&&b.documentElement&&b.documentElement.tagName!="parsererror"?b:null},parse:function(jsonString){var js=jsonString;js.substr(0,9)=="while(1);"&&(js=js.substr(9)),js.substr(0,2)=="/*"&&(js=js.substr(2,js.length-4)),js||(js="{}");return $.jgrid.useJSON===!0&&typeof JSON=="object"&&typeof JSON.parse=="function"?JSON.parse(js):eval("("+js+")")},parseDate:function(a,b){var c={m:1,d:1,y:1970,h:0,i:0,s:0},d,e,f,g=/[\\\/:_;.,\t\T\s-]/;if(b&&b!==null&&b!==undefined){b=$.trim(b),b=b.split(g),a=a.split(g);var h=$.jgrid.formatter.date.monthNames,i=$.jgrid.formatter.date.AmPm,j=function(a,b){a===0?b==12&&(b=0):b!=12&&(b+=12);return b};for(d=0,e=a.length;d<e;d++)a[d]=="M"&&(f=$.inArray(b[d],h),f!==-1&&f<12&&(b[d]=f+1)),a[d]=="F"&&(f=$.inArray(b[d],h),f!==-1&&f>11&&(b[d]=f+1-12)),a[d]=="a"&&(f=$.inArray(b[d],i),f!==-1&&f<2&&b[d]==i[f]&&(b[d]=f,c.h=j(b[d],c.h))),a[d]=="A"&&(f=$.inArray(b[d],i),f!==-1&&f>1&&b[d]==i[f]&&(b[d]=f-2,c.h=j(b[d],c.h))),b[d]!==undefined&&(c[a[d].toLowerCase()]=parseInt(b[d],10));c.m=parseInt(c.m,10)-1;var k=c.y;k>=70&&k<=99?c.y=1900+c.y:k>=0&&k<=69&&(c.y=2e3+c.y)}return new Date(c.y,c.m,c.d,c.h,c.i,c.s,0)},jqID:function(a){return String(a).replace(/[!"#$%&'()*+,.\/:;<=>?@\[\\\]\^`{|}~]/g,"\\$&")},guid:1,uidPref:"jqg",randId:function(a){return(a?a:$.jgrid.uidPref)+$.jgrid.guid++},getAccessor:function(a,b){var c,d,e=[],f;if(typeof b=="function")return b(a);c=a[b];if(c===undefined)try{typeof b=="string"&&(e=b.split(".")),f=e.length;if(f){c=a;while(c&&f--)d=e.shift(),c=c[d]}}catch(g){}return c},ajaxOptions:{},from:function(source,initalQuery){var queryObject=function(d,q){typeof d=="string"&&(d=$.data(d));var self=this,_data=d,_usecase=!0,_trim=!1,_query=q,_stripNum=/[\$,%]/g,_lastCommand=null,_lastField=null,_orDepth=0,_negate=!1,_queuedOperator="",_sorting=[],_useProperties=!0;if(typeof d=="object"&&d.push)d.length>0&&(typeof d[0]!="object"?_useProperties=!1:_useProperties=!0);else throw"data provides is not an array";this._hasData=function(){return _data===null?!1:_data.length===0?!1:!0},this._getStr=function(a){var b=[];_trim&&b.push("jQuery.trim("),b.push("String("+a+")"),_trim&&b.push(")"),_usecase||b.push(".toLowerCase()");return b.join("")},this._strComp=function(a){return typeof a=="string"?".toString()":""},this._group=function(a,b){return{field:a.toString(),unique:b,items:[]}},this._toStr=function(a){_trim&&(a=$.trim(a)),_usecase||(a=a.toLowerCase()),a=a.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"');return a},this._funcLoop=function(a){var b=[];$.each(_data,function(c,d){b.push(a(d))});return b},this._append=function(a){var b;_query===null?_query="":_query+=_queuedOperator===""?" && ":_queuedOperator;for(b=0;b<_orDepth;b++)_query+="(";_negate&&(_query+="!"),_query+="("+a+")",_negate=!1,_queuedOperator="",_orDepth=0},this._setCommand=function(a,b){_lastCommand=a,_lastField=b},this._resetNegate=function(){_negate=!1},this._repeatCommand=function(a,b){if(_lastCommand===null)return self;if(a!==null&&b!==null)return _lastCommand(a,b);if(_lastField===null)return _lastCommand(a);if(!_useProperties)return _lastCommand(a);return _lastCommand(_lastField,a)},this._equals=function(a,b){return self._compare(a,b,1)===0},this._compare=function(a,b,c){c===undefined&&(c=1),a===undefined&&(a=null),b===undefined&&(b=null);if(a===null&&b===null)return 0;if(a===null&&b!==null)return 1;if(a!==null&&b===null)return-1;!_usecase&&typeof a!="number"&&typeof b!="number"&&(a=String(a).toLowerCase(),b=String(b).toLowerCase());if(a<b)return-c;if(a>b)return c;return 0},this._performSort=function(){_sorting.length!==0&&(_data=self._doSort(_data,0))},this._doSort=function(a,b){var c=_sorting[b].by,d=_sorting[b].dir,e=_sorting[b].type,f=_sorting[b].datefmt;if(b==_sorting.length-1)return self._getOrder(a,c,d,e,f);b++;var g=self._getGroup(a,c,d,e,f),h=[];for(var i=0;i<g.length;i++){var j=self._doSort(g[i].items,b);for(var k=0;k<j.length;k++)h.push(j[k])}return h},this._getOrder=function(a,b,c,d,e){var f=[],g=[],h=c=="a"?1:-1,i,j,k,l;d===undefined&&(d="text"),d=="float"||d=="number"||d=="currency"||d=="numeric"?l=function(a,b){var c=parseFloat(String(a).replace(_stripNum,""));return isNaN(c)?0:c}:d=="int"||d=="integer"?l=function(a,b){return a?parseFloat(String(a).replace(_stripNum,"")):0}:d=="date"||d=="datetime"?l=function(a,b){return $.jgrid.parseDate(e,a).getTime()}:$.isFunction(d)?l=d:l=function(a,b){a||(a="");return $.trim(String(a).toUpperCase())},$.each(a,function(a,c){j=b!==""?$.jgrid.getAccessor(c,b):c,j===undefined&&(j=""),j=l(j,c),g.push({vSort:j,index:a})}),g.sort(function(a,b){a=a.vSort,b=b.vSort;return self._compare(a,b,h)}),k=0;var m=a.length;while(k<m)i=g[k].index,f.push(a[i]),k++;return f},this._getGroup=function(a,b,c,d,e){var f=[],g=null,h=null,i;$.each(self._getOrder(a,b,c,d,e),function(a,c){i=$.jgrid.getAccessor(c,b),i===undefined&&(i=""),self._equals(h,i)||(h=i,g!==null&&f.push(g),g=self._group(b,i)),g.items.push(c)}),g!==null&&f.push(g);return f},this.ignoreCase=function(){_usecase=!1;return self},this.useCase=function(){_usecase=!0;return self},this.trim=function(){_trim=!0;return self},this.noTrim=function(){_trim=!1;return self},this.execute=function(){var match=_query,results=[];if(match===null)return self;$.each(_data,function(){eval(match)&&results.push(this)}),_data=results;return self},this.data=function(){return _data},this.select=function(a){self._performSort();if(!self._hasData())return[];self.execute();if($.isFunction(a)){var b=[];$.each(_data,function(c,d){b.push(a(d))});return b}return _data},this.hasMatch=function(a){if(!self._hasData())return!1;self.execute();return _data.length>0},this.andNot=function(a,b,c){_negate=!_negate;return self.and(a,b,c)},this.orNot=function(a,b,c){_negate=!_negate;return self.or(a,b,c)},this.not=function(a,b,c){return self.andNot(a,b,c)},this.and=function(a,b,c){_queuedOperator=" && ";if(a===undefined)return self;return self._repeatCommand(a,b,c)},this.or=function(a,b,c){_queuedOperator=" || ";if(a===undefined)return self;return self._repeatCommand(a,b,c)},this.orBegin=function(){_orDepth++;return self},this.orEnd=function(){_query!==null&&(_query+=")");return self},this.isNot=function(a){_negate=!_negate;return self.is(a)},this.is=function(a){self._append("this."+a),self._resetNegate();return self},this._compareValues=function(a,b,c,d,e){var f;_useProperties?f="jQuery.jgrid.getAccessor(this,'"+b+"')":f="this",c===undefined&&(c=null);var g=c,h=e.stype===undefined?"text":e.stype;if(c!==null)switch(h){case"int":case"integer":g=isNaN(Number(g))||g===""?"0":g,f="parseInt("+f+",10)",g="parseInt("+g+",10)";break;case"float":case"number":case"numeric":g=String(g).replace(_stripNum,""),g=isNaN(Number(g))||g===""?"0":g,f="parseFloat("+f+")",g="parseFloat("+g+")";break;case"date":case"datetime":g=String($.jgrid.parseDate(e.newfmt||"Y-m-d",g).getTime()),f='jQuery.jgrid.parseDate("'+e.srcfmt+'",'+f+").getTime()";break;default:f=self._getStr(f),g=self._getStr('"'+self._toStr(g)+'"')}self._append(f+" "+d+" "+g),self._setCommand(a,b),self._resetNegate();return self},this.equals=function(a,b,c){return self._compareValues(self.equals,a,b,"==",c)},this.notEquals=function(a,b,c){return self._compareValues(self.equals,a,b,"!==",c)},this.isNull=function(a,b,c){return self._compareValues(self.equals,a,null,"===",c)},this.greater=function(a,b,c){return self._compareValues(self.greater,a,b,">",c)},this.less=function(a,b,c){return self._compareValues(self.less,a,b,"<",c)},this.greaterOrEquals=function(a,b,c){return self._compareValues(self.greaterOrEquals,a,b,">=",c)},this.lessOrEquals=function(a,b,c){return self._compareValues(self.lessOrEquals,a,b,"<=",c)},this.startsWith=function(a,b){var c=b===undefined||b===null?a:b,d=_trim?$.trim(c.toString()).length:c.toString().length;_useProperties?self._append(self._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+".substr(0,"+d+") == "+self._getStr('"'+self._toStr(b)+'"')):(d=_trim?$.trim(b.toString()).length:b.toString().length,self._append(self._getStr("this")+".substr(0,"+d+") == "+self._getStr('"'+self._toStr(a)+'"'))),self._setCommand(self.startsWith,a),self._resetNegate();return self},this.endsWith=function(a,b){var c=b===undefined||b===null?a:b,d=_trim?$.trim(c.toString()).length:c.toString().length;_useProperties?self._append(self._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+".substr("+self._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+".length-"+d+","+d+') == "'+self._toStr(b)+'"'):self._append(self._getStr("this")+".substr("+self._getStr("this")+'.length-"'+self._toStr(a)+'".length,"'+self._toStr(a)+'".length) == "'+self._toStr(a)+'"'),self._setCommand(self.endsWith,a),self._resetNegate();return self},this.contains=function(a,b){_useProperties?self._append(self._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+'.indexOf("'+self._toStr(b)+'",0) > -1'):self._append(self._getStr("this")+'.indexOf("'+self._toStr(a)+'",0) > -1'),self._setCommand(self.contains,a),self._resetNegate();return self},this.groupBy=function(a,b,c,d){if(!self._hasData())return null;return self._getGroup(_data,a,b,c,d)},this.orderBy=function(a,b,c,d){b=b===undefined||b===null?"a":$.trim(b.toString().toLowerCase());if(c===null||c===undefined)c="text";if(d===null||d===undefined)d="Y-m-d";if(b=="desc"||b=="descending")b="d";if(b=="asc"||b=="ascending")b="a";_sorting.push({by:a,dir:b,type:c,datefmt:d});return self};return self};return new queryObject(source,null)},extend:function(a){$.extend($.fn.jqGrid,a),this.no_legacy_api||$.fn.extend(a)}}),$.fn.jqGrid=function(a){if(typeof a=="string"){var b=$.jgrid.getAccessor($.fn.jqGrid,a);if(!b)throw"jqGrid - No such method: "+a;var c=$.makeArray(arguments).slice(1);return b.apply(this,c)}return this.each(function(){if(!this.grid){var b=$.extend(!0,{url:"",height:150,page:1,rowNum:20,rowTotal:null,records:0,pager:"",pgbuttons:!0,pginput:!0,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",altRows:!1,selarrrow:[],savedRow:[],shrinkToFit:!0,xmlReader:{},jsonReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,multiselect:!1,multikey:!1,editurl:null,search:!1,caption:"",hidegrid:!0,hiddengrid:!1,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:!1,gridstate:"visible",cellEdit:!1,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,multiboxonly:!1,deselectAfterSort:!0,scrollrows:!1,autowidth:!1,scrollOffset:18,cellLayout:5,subGridWidth:20,multiselectWidth:20,gridview:!1,rownumWidth:25,rownumbers:!1,pagerpos:"center",recordpos:"right",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,altclass:"ui-priority-secondary",viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!1,remapColumns:[],ajaxGridOptions:{},direction:"ltr",toppager:!1,headertitles:!1,scrollTimeout:40,data:[],_index:{},grouping:!1,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:!1,sortitems:[],sortnames:[],groupDataSorted:!1,summary:[],summaryval:[],plusicon:"ui-icon-circlesmall-plus",minusicon:"ui-icon-circlesmall-minus"},ignoreCase:!1,cmTemplate:{}},$.jgrid.defaults,a||{}),c={headers:[],cols:[],footers:[],dragStart:function(a,c,d){this.resizing={idx:a,startX:c.clientX,sOL:d[0]},this.hDiv.style.cursor="col-resize",this.curGbox=$("#rs_m"+$.jgrid.jqID(b.id),"#gbox_"+$.jgrid.jqID(b.id)),this.curGbox.css({display:"block",left:d[0],top:d[1],height:d[2]}),$.isFunction(b.resizeStart)&&b.resizeStart.call(this,c,a),document.onselectstart=function(){return!1}},dragMove:function(a){if(this.resizing){var c=a.clientX-this.resizing.startX,d=this.headers[this.resizing.idx],e=b.direction==="ltr"?d.width+c:d.width-c,f,g;e>33&&(this.curGbox.css({left:this.resizing.sOL+c}),b.forceFit===!0?(f=this.headers[this.resizing.idx+b.nv],g=b.direction==="ltr"?f.width-c:f.width+c,g>33&&(d.newWidth=e,f.newWidth=g)):(this.newWidth=b.direction==="ltr"?b.tblwidth+c:b.tblwidth-c,d.newWidth=e))}},dragEnd:function(){this.hDiv.style.cursor="default";if(this.resizing){var a=this.resizing.idx,c=this.headers[a].newWidth||this.headers[a].width;c=parseInt(c,10),this.resizing=!1,$("#rs_m"+$.jgrid.jqID(b.id)).css("display","none"),b.colModel[a].width=c,this.headers[a].width=c,this.headers[a].el.style.width=c+"px",this.cols[a].style.width=c+"px",this.footers.length>0&&(this.footers[a].style.width=c+"px"),b.forceFit===!0?(c=this.headers[a+b.nv].newWidth||this.headers[a+b.nv].width,this.headers[a+b.nv].width=c,this.headers[a+b.nv].el.style.width=c+"px",this.cols[a+b.nv].style.width=c+"px",this.footers.length>0&&(this.footers[a+b.nv].style.width=c+"px"),b.colModel[a+b.nv].width=c):(b.tblwidth=this.newWidth||b.tblwidth,$("table:first",this.bDiv).css("width",b.tblwidth+"px"),$("table:first",this.hDiv).css("width",b.tblwidth+"px"),this.hDiv.scrollLeft=this.bDiv.scrollLeft,b.footerrow&&($("table:first",this.sDiv).css("width",b.tblwidth+"px"),this.sDiv.scrollLeft=this.bDiv.scrollLeft)),$.isFunction(b.resizeStop)&&b.resizeStop.call(this,c,a)}this.curGbox=null,document.onselectstart=function(){return!0}},populateVisible:function(){c.timer&&clearTimeout(c.timer),c.timer=null;var a=$(c.bDiv).height();if(!!a){var d=$("table:first",c.bDiv),e,f;if(d[0].rows.length)try{e=d[0].rows[1],f=e?$(e).outerHeight()||c.prevRowHeight:c.prevRowHeight}catch(g){f=c.prevRowHeight}if(!f)return;c.prevRowHeight=f;var h=b.rowNum,i=c.scrollTop=c.bDiv.scrollTop,j=Math.round(d.position().top)-i,k=j+d.height(),l=f*h,m,n,o;k<a&&j<=0&&(b.lastpage===undefined||parseInt((k+i+l-1)/l,10)<=b.lastpage)&&(n=parseInt((a-k+l-1)/l,10),k>=0||n<2||b.scroll===!0?(m=Math.round((k+i)/l)+1,j=-1):j=1),j>0&&(m=parseInt(i/l,10)+1,n=parseInt((i+a)/l,10)+2-m,o=!0);if(n){if(b.lastpage&&m>b.lastpage||b.lastpage==1||m===b.page&&m===b.lastpage)return;c.hDiv.loading?c.timer=setTimeout(c.populateVisible,b.scrollTimeout):(b.page=m,o&&(c.selectionPreserver(d[0]),c.emptyRows(c.bDiv,!1,!1)),c.populate(n))}}},scrollGrid:function(a){if(b.scroll){var d=c.bDiv.scrollTop;c.scrollTop===undefined&&(c.scrollTop=0),d!=c.scrollTop&&(c.scrollTop=d,c.timer&&clearTimeout(c.timer),c.timer=setTimeout(c.populateVisible,b.scrollTimeout))}c.hDiv.scrollLeft=c.bDiv.scrollLeft,b.footerrow&&(c.sDiv.scrollLeft=c.bDiv.scrollLeft),a&&a.stopPropagation()},selectionPreserver:function(a){var b=a.p,c=b.selrow,d=b.selarrrow?$.makeArray(b.selarrrow):null,e=a.grid.bDiv.scrollLeft,f=b.gridComplete;b.gridComplete=function(){b.selrow=null,b.selarrrow=[];if(b.multiselect&&d&&d.length>0)for(var g=0;g<d.length;g++)d[g]!=c&&$(a).jqGrid("setSelection",d[g],!1);c&&$(a).jqGrid("setSelection",c,!1),a.grid.bDiv.scrollLeft=e,b.gridComplete=f,b.gridComplete&&f()}}};if(this.tagName.toUpperCase()!="TABLE"){alert("Element is not a table");return}$(this).empty().attr("tabindex","1"),this.p=b;var d,e,f;if(this.p.colNames.length===0)for(d=0;d<this.p.colModel.length;d++)this.p.colNames[d]=this.p.colModel[d].label||this.p.colModel[d].name;if(this.p.colNames.length!==this.p.colModel.length){alert($.jgrid.errors.model);return}var g=$("<div class='ui-jqgrid-view'></div>"),h,i=$.browser.msie?!0:!1,j=$.browser.webkit||$.browser.safari?!0:!1;f=this,f.p.direction=$.trim(f.p.direction.toLowerCase()),$.inArray(f.p.direction,["ltr","rtl"])==-1&&(f.p.direction="ltr"),e=f.p.direction,$(g).insertBefore(this),$(this).appendTo(g).removeClass("scroll");var k=$("<div class='ui-jqgrid ui-widget ui-widget-content ui-corner-all'></div>");$(k).insertBefore(g).attr({id:"gbox_"+this.id,dir:e}),$(g).appendTo(k).attr("id","gview_"+this.id),i&&$.browser.version<=6?h='<iframe style="display:block;position:absolute;z-index:-1;filter:Alpha(Opacity=\'0\');" src="javascript:false;"></iframe>':h="",$("<div class='ui-widget-overlay jqgrid-overlay' id='lui_"+this.id+"'></div>").append(h).insertBefore(g),$("<div class='loading ui-state-default ui-state-active' id='load_"+this.id+"'>"+this.p.loadtext+"</div>").insertBefore(g),$(this).attr({cellspacing:"0",cellpadding:"0",border:"0",role:"grid","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id});var l=["shiftKey","altKey","ctrlKey"],m=function(a,b){a=parseInt(a,10);return isNaN(a)?b?b:0:a},n=function(a,b,d,e,g,h){var i=f.p.colModel[a],j=i.align,k='style="',l=i.classes,m=i.name,n,o=[];j&&(k+="text-align:"+j+";"),i.hidden===!0&&(k+="display:none;");if(b===0)k+="width: "+c.headers[a].width+"px;";else if(i.cellattr&&$.isFunction(i.cellattr)){n=i.cellattr.call(f,g,d,e,i,h);if(n&&typeof n=="string"){n=n.replace(/style/i,"style").replace(/title/i,"title"),n.indexOf("title")>-1&&(i.title=!1),n.indexOf("class")>-1&&(l=undefined),o=n.split("style");if(o.length===2){o[1]=$.trim(o[1].replace("=",""));if(o[1].indexOf("'")===0||o[1].indexOf('"')===0)o[1]=o[1].substring(1);k+=o[1].replace(/'/gi,'"')}else k+='"'}}o.length||(o[0]="",k+='"'),k+=(l!==undefined?' class="'+l+'"':"")+(i.title&&d?' title="'+$.jgrid.stripHtml(d)+'"':""),k+=' aria-describedby="'+f.p.id+"_"+m+'"';return k+o[0]},o=function(a){return a===undefined||a===null||a===""?"&#160;":f.p.autoencode?$.jgrid.htmlEncode(a):a+""},p=function(a,b,c,d,e){var g=f.p.colModel[c],h;if(typeof g.formatter!="undefined"){var i={rowId:a,colModel:g,gid:f.p.id,pos:c};$.isFunction(g.formatter)?h=g.formatter.call(f,b,i,d,e):$.fmatter?h=$.fn.fmatter(g.formatter,b,i,d,e):h=o(b)}else h=o(b);return h},q=function(a,b,c,d,e){var f,g;f=p(a,b,c,e,"add"),g=n(c,d,f,e,a,!0);return'<td role="gridcell" '+g+">"+f+"</td>"},r=function(a,b,c){var d='<input role="checkbox" type="checkbox" id="jqg_'+f.p.id+"_"+a+'" class="cbox" name="jqg_'+f.p.id+"_"+a+'"/>',e=n(b,c,"",null,a,!0);return'<td role="gridcell" '+e+">"+d+"</td>"},s=function(a,b,c,d){var e=(parseInt(c,10)-1)*parseInt(d,10)+1+b,f=n(a,b,e,null,b,!0);return'<td role="gridcell" class="ui-state-default jqgrid-rownum" '+f+">"+e+"</td>"},t=function(a){var b,c=[],d=0,e;for(e=0;e<f.p.colModel.length;e++)b=f.p.colModel[e],b.name!=="cb"&&b.name!=="subgrid"&&b.name!=="rn"&&(a=="local"?c[d]=b.name:c[d]=a=="xml"?b.xmlmap||b.name:b.jsonmap||b.name,d++);return c},u=function(a){var b=f.p.remapColumns;if(!b||!b.length)b=$.map(f.p.colModel,function(a,b){return b});a&&(b=$.map(b,function(b){return b<a?null:b-a}));return b},v=function(a,b,c){if(f.p.deepempty)$("#"+$.jgrid.jqID(f.p.id)+" tbody:first tr:gt(0)").remove();else{var d=$("#"+$.jgrid.jqID(f.p.id)+" tbody:first tr:first")[0];$("#"+$.jgrid.jqID(f.p.id)+" tbody:first").empty().append(d)}b&&f.p.scroll&&($(">div:first",a).css({height:"auto"}).children("div:first").css({height:0,display:"none"}),a.scrollTop=0),c===!0&&f.p.treeGrid===!0&&(f.p.data=[],f.p._index={})},w=function(){var a=f.p.data.length,b,c,d,e=f.p.rownumbers===!0?1:0,g=f.p.multiselect===!0?1:0,h=f.p.subGrid===!0?1:0;f.p.keyIndex===!1||f.p.loadonce===!0?b=f.p.localReader.id:b=f.p.colModel[f.p.keyIndex+g+h+e].name;for(c=0;c<a;c++)d=$.jgrid.getAccessor(f.p.data[c],b),f.p._index[d]=c},x=function(a,b,c,d,e){var g=new Date,h=f.p.datatype!="local"&&f.p.loadonce||f.p.datatype=="xmlstring",i="_id_",j=f.p.datatype=="local"?"local":"xml";h&&(f.p.data=[],f.p._index={},f.p.localReader.id=i),f.p.reccount=0;if($.isXMLDoc(a))f.p.treeANode===-1&&!f.p.scroll?(v(b,!1,!0),c=1):c=c>1?c:1;else return;var k,l,m=0,n,o,p=0,w=0,x=0,y,z,A=[],B,C={},D,E,F=[],G=f.p.altRows===!0?" "+f.p.altclass:"",H;f.p.xmlReader.repeatitems||(A=t(j)),f.p.keyIndex===!1?y=f.p.xmlReader.id:y=f.p.keyIndex,A.length>0&&!isNaN(y)&&(f.p.remapColumns&&f.p.remapColumns.length&&(y=$.inArray(y,f.p.remapColumns)),y=A[y]),(y+"").indexOf("[")===-1?A.length?z=function(a,b){return $(y,a).text()||b}:z=function(a,b){return $(f.p.xmlReader.cell,a).eq(y).text()||b}:z=function(a,b){return a.getAttribute(y.replace(/[\[\]]/g,""))||b},f.p.userData={},$(f.p.xmlReader.page,a).each(function(){f.p.page=this.textContent||this.text||0}),$(f.p.xmlReader.total,a).each(function(){f.p.lastpage=this.textContent||this.text,f.p.lastpage===undefined&&(f.p.lastpage=1)}),$(f.p.xmlReader.records,a).each(function(){f.p.records=this.textContent||this.text||0}),$(f.p.xmlReader.userdata,a).each(function(){f.p.userData[this.getAttribute("name")]=this.textContent||this.text});var I=$(f.p.xmlReader.root+" "+f.p.xmlReader.row,a);I||(I=[]);var J=I.length,K=0,L={},M;if(I&&J){M=parseInt(f.p.rowNum,10);var N=f.p.scroll?$.jgrid.randId():1,O;e&&(M*=e+1);var P=$.isFunction(f.p.afterInsertRow),Q="";f.p.grouping&&f.p.groupingView.groupCollapse===!0&&(Q=' style="display:none;"');while(K<J){D=I[K],E=z(D,N+K),O=c===0?0:c+1,H=(O+K)%2==1?G:"",F.push("<tr"+Q+' id="'+E+'" tabindex="-1" role="row" class ="ui-widget-content jqgrow ui-row-'+f.p.direction+""+H+'">'),f.p.rownumbers===!0&&(F.push(s(0,K,f.p.page,f.p.rowNum)),x=1),f.p.multiselect===!0&&(F.push(r(E,x,K)),p=1),f.p.subGrid===!0&&(F.push($(f).jqGrid("addSubGridCell",p+x,K+c)),w=1);if(f.p.xmlReader.repeatitems){B||(B=u(p+w+x));var R=$(f.p.xmlReader.cell,D);$.each(B,function(a){var b=R[this];if(!b)return!1;n=b.textContent||b.text,C[f.p.colModel[a+p+w+x].name]=n,F.push(q(E,n,a+p+w+x,K+c,D))})}else for(k=0;k<A.length;k++)n=$(A[k],D).text(),C[f.p.colModel[k+p+w+x].name]=n,F.push(q(E,n,k+p+w+x,K+c,D));F.push("</tr>");if(f.p.grouping){var S=f.p.groupingView.groupField.length,T=[];for(var U=0;U<S;U++)T.push(C[f.p.groupingView.groupField[U]]);L=$(f).jqGrid("groupingPrepare",F,T,L,C),F=[]}if(h||f.p.treeGrid===!0)C[i]=E,f.p.data.push(C),f.p._index[E]=f.p.data.length-1;f.p.gridview===!1&&($("tbody:first",b).append(F.join("")),P&&f.p.afterInsertRow.call(f,E,C,D),F=[]),C={},m++,K++;if(m==M)break}}f.p.gridview===!0&&(l=f.p.treeANode>-1?f.p.treeANode:0,f.p.grouping?($(f).jqGrid("groupingRender",L,f.p.colModel.length),L=null):f.p.treeGrid===!0&&l>0?$(f.rows[l]).after(F.join("")):$("tbody:first",b).append(F.join("")));if(f.p.subGrid===!0)try{$(f).jqGrid("addSubGrid",p+x)}catch(V){}f.p.totaltime=new Date-g,m>0&&f.p.records===0&&(f.p.records=J),F=null;if(f.p.treeGrid===!0)try{$(f).jqGrid("setTreeNode",l+1,m+l+1)}catch(W){}!f.p.treeGrid&&!f.p.scroll&&(f.grid.bDiv.scrollTop=0),f.p.reccount=m,f.p.treeANode=-1,f.p.userDataOnFooter&&$(f).jqGrid("footerData","set",f.p.userData,!0),h&&(f.p.records=J,f.p.lastpage=Math.ceil(J/M)),d||f.updatepager(!1,!0);if(h)while(m<J){D=I[m],E=z(D,m);if(f.p.xmlReader.repeatitems){B||(B=u(p+w+x));var X=$(f.p.xmlReader.cell,D);$.each(B,function(a){var b=X[this];if(!b)return!1;n=b.textContent||b.text,C[f.p.colModel[a+p+w+x].name]=n})}else for(k=0;k<A.length;k++)n=$(A[k],D).text(),C[f.p.colModel[k+p+w+x].name]=n;C[i]=E,f.p.data.push(C),f.p._index[E]=f.p.data.length-1,C={},m++}},y=function(a,b,c,d,e){var g=new Date;if(a)f.p.treeANode===-1&&!f.p.scroll?(v(b,!1,!0),c=1):c=c>1?c:1;else return;var h,i="_id_",j,k=f.p.datatype!="local"&&f.p.loadonce||f.p.datatype=="jsonstring";k&&(f.p.data=[],f.p._index={},f.p.localReader.id=i),f.p.reccount=0,f.p.datatype=="local"?(h=f.p.localReader,j="local"):(h=f.p.jsonReader,j="json");var l=0,m,n,o,p=[],w,x,y=0,z=0,A=0,B,C,D,E={},F,G,H=[],I=f.p.altRows===!0?" "+f.p.altclass:"",J,K;f.p.page=$.jgrid.getAccessor(a,h.page)||0,K=$.jgrid.getAccessor(a,h.total),f.p.lastpage=K===undefined?1:K,f.p.records=$.jgrid.getAccessor(a,h.records)||0,f.p.userData=$.jgrid.getAccessor(a,h.userdata)||{},h.repeatitems||(w=p=t(j)),f.p.keyIndex===!1?D=h.id:D=f.p.keyIndex,p.length>0&&!isNaN(D)&&(f.p.remapColumns&&f.p.remapColumns.length&&(D=$.inArray(D,f.p.remapColumns)),D=p[D]),C=$.jgrid.getAccessor(a,h.root),C||(C=[]),B=C.length,n=0;var L=parseInt(f.p.rowNum,10),M=f.p.scroll?$.jgrid.randId():1,N;e&&(L*=e+1);var O=$.isFunction(f.p.afterInsertRow),P={},Q="";f.p.grouping&&f.p.groupingView.groupCollapse===!0&&(Q=' style="display:none;"');while(n<B){x=C[n],G=$.jgrid.getAccessor(x,D);if(G===undefined){G=M+n;if(p.length===0&&h.cell){var R=$.jgrid.getAccessor(x,h.cell);G=R[D]||G,R=null}}N=c===1?0:c,J=(N+n)%2==1?I:"",H.push("<tr"+Q+' id="'+G+'" tabindex="-1" role="row" class= "ui-widget-content jqgrow ui-row-'+f.p.direction+""+J+'">'),f.p.rownumbers===!0&&(H.push(s(0,n,f.p.page,f.p.rowNum)),A=1),f.p.multiselect&&(H.push(r(G,A,n)),y=1),f.p.subGrid&&(H.push($(f).jqGrid("addSubGridCell",y+A,n+c)),z=1),h.repeatitems&&(h.cell&&(x=$.jgrid.getAccessor(x,h.cell)),w||(w=u(y+z+A)));for(o=0;o<w.length;o++)m=$.jgrid.getAccessor(x,w[o]),H.push(q(G,m,o+y+z+A,n+c,x)),E[f.p.colModel[o+y+z+A].name]=m;H.push("</tr>");if(f.p.grouping){var S=f.p.groupingView.groupField.length,T=[];for(var U=0;U<S;U++)T.push(E[f.p.groupingView.groupField[U]]);P=$(f).jqGrid("groupingPrepare",H,T,P,E),H=[]}if(k||f.p.treeGrid===!0)E[i]=G,f.p.data.push(E),f.p._index[G]=f.p.data.length-1;f.p.gridview===!1&&($("#"+$.jgrid.jqID(f.p.id)+" tbody:first").append(H.join("")),O&&f.p.afterInsertRow.call(f,G,E,x),H=[]),E={},l++,n++;if(l==L)break}f.p.gridview===!0&&(F=f.p.treeANode>-1?f.p.treeANode:0,f.p.grouping?($(f).jqGrid("groupingRender",P,f.p.colModel.length),P=null):f.p.treeGrid===!0&&F>0?$(f.rows[F]).after(H.join("")):$("#"+$.jgrid.jqID(f.p.id)+" tbody:first").append(H.join("")));if(f.p.subGrid===!0)try{$(f).jqGrid("addSubGrid",y+A)}catch(V){}f.p.totaltime=new Date-g,l>0&&f.p.records===0&&(f.p.records=B),H=null;if(f.p.treeGrid===!0)try{$(f).jqGrid("setTreeNode",F+1,l+F+1)}catch(W){}!f.p.treeGrid&&!f.p.scroll&&(f.grid.bDiv.scrollTop=0),f.p.reccount=l,f.p.treeANode=-1,f.p.userDataOnFooter&&$(f).jqGrid("footerData","set",f.p.userData,!0),k&&(f.p.records=B,f.p.lastpage=Math.ceil(B/L)),d||f.updatepager(!1,!0);if(k)while(l<B&&C[l]){x=C[l],G=$.jgrid.getAccessor(x,D);if(G===undefined){G=M+l;if(p.length===0&&h.cell){var X=$.jgrid.getAccessor(x,h.cell);G=X[D]||G,X=null}}if(x){h.repeatitems&&(h.cell&&(x=$.jgrid.getAccessor(x,h.cell)),w||(w=u(y+z+A)));for(o=0;o<w.length;o++)m=$.jgrid.getAccessor(x,w[o]),E[f.p.colModel[o+y+z+A].name]=m;E[i]=G,f.p.data.push(E),f.p._index[G]=f.p.data.length-1,E={}}l++}},z=function(){function m(a){var b=0,d,e,f,g,h;if(a.groups!==undefined){e=a.groups.length&&a.groupOp.toString().toUpperCase()==="OR",e&&l.orBegin();for(d=0;d<a.groups.length;d++){b>0&&e&&l.or();try{m(a.groups[d])}catch(i){alert(i)}b++}e&&l.orEnd()}if(a.rules!==undefined){if(b>0){var j=l.select();l=$.jgrid.from(j)}try{f=a.rules.length&&a.groupOp.toString().toUpperCase()==="OR",f&&l.orBegin();for(d=0;d<a.rules.length;d++)h=a.rules[d],g=a.groupOp.toString().toUpperCase(),k[h.op]&&h.field&&(b>0&&g&&g==="OR"&&(l=l.or()),l=k[h.op](l,g)(h.field,h.data,c[h.field])),b++;f&&l.orEnd()}catch(n){alert(n)}}}var a,b=!1,c={},d=[],e=[],g,h,i;if(!!$.isArray(f.p.data)){var j=f.p.grouping?f.p.groupingView:!1;$.each(f.p.colModel,function(k,l){h=this.sorttype||"text",h=="date"||h=="datetime"?(this.formatter&&typeof this.formatter=="string"&&this.formatter=="date"?(this.formatoptions&&this.formatoptions.srcformat?g=this.formatoptions.srcformat:g=$.jgrid.formatter.date.srcformat,this.formatoptions&&this.formatoptions.newformat?i=this.formatoptions.newformat:i=$.jgrid.formatter.date.newformat):g=i=this.datefmt||"Y-m-d",c[this.name]={stype:h,srcfmt:g,newfmt:i}):c[this.name]={stype:h,srcfmt:"",newfmt:""};if(f.p.grouping&&this.name==j.groupField[0]){var m=this.name;typeof this.index!="undefined"&&(m=this.index),d[0]=c[m],e.push(m)}!b&&(this.index==f.p.sortname||this.name==f.p.sortname)&&(a=this.name,b=!0)});if(f.p.treeGrid){$(f).jqGrid("SortTree",a,f.p.sortorder,c[a].stype,c[a].srcfmt);return}var k={eq:function(a,b){return a.equals},ne:function(a,b){return a.notEquals},lt:function(a,b){return a.less},le:function(a,b){return a.lessOrEquals},gt:function(a,b){return a.greater},ge:function(a,b){return a.greaterOrEquals},cn:function(a,b){return a.contains},nc:function(a,b){return b==="OR"?a.orNot().contains:a.andNot().contains},bw:function(a,b){return a.startsWith},bn:function(a,b){return b==="OR"?a.orNot().startsWith:a.andNot().startsWith},en:function(a,b){return b==="OR"?a.orNot().endsWith:a.andNot().endsWith},ew:function(a,b){return a.endsWith},ni:function(a,b){return b==="OR"?a.orNot().equals:a.andNot().equals},"in":function(a,b){return a.equals},nu:function(a,b){return a.isNull},nn:function(a,b){return b==="OR"?a.orNot().isNull:a.andNot().isNull}},l=$.jgrid.from(f.p.data);f.p.ignoreCase&&(l=l.ignoreCase());if(f.p.search===!0){var n=f.p.postData.filters;if(n)typeof n=="string"&&(n=$.jgrid.parse(n)),m(n);else try{l=k[f.p.postData.searchOper](l)(f.p.postData.searchField,f.p.postData.searchString,c[f.p.postData.searchField])}catch(o){}}f.p.grouping&&(l.orderBy(e,j.groupOrder[0],d[0].stype,d[0].srcfmt),j.groupDataSorted=!0),a&&f.p.sortorder&&b&&(f.p.sortorder.toUpperCase()=="DESC"?l.orderBy(f.p.sortname,"d",c[a].stype,c[a].srcfmt):l.orderBy(f.p.sortname,"a",c[a].stype,c[a].srcfmt));var p=l.select(),q=parseInt(f.p.rowNum,10),r=p.length,s=parseInt(f.p.page,10),t=Math.ceil(r/q),u={};p=p.slice((s-1)*q,s*q),l=null,c=null,u[f.p.localReader.total]=t,u[f.p.localReader.page]=s,u[f.p.localReader.records]=r,u[f.p.localReader.root]=p,p=null;return u}},A=function(a,b){var c,d,e,g,h,i,j,k="",l,n=f.p.pager?"_"+$.jgrid.jqID(f.p.pager.substr(1)):"",o=f.p.toppager?"_"+f.p.toppager.substr(1):"";e=parseInt(f.p.page,10)-1,e<0&&(e=0),e=e*parseInt(f.p.rowNum,10),h=e+f.p.reccount;if(f.p.scroll){var p=$("tbody:first > tr:gt(0)",f.grid.bDiv);e=h-p.length,f.p.reccount=p.length;var q=p.outerHeight()||f.grid.prevRowHeight;if(q){var r=e*q,s=parseInt(f.p.records,10)*q;$(">div:first",f.grid.bDiv).css({height:s}).children("div:first").css({height:r,display:r?"":"none"})}f.grid.bDiv.scrollLeft=f.grid.hDiv.scrollLeft}k=f.p.pager?f.p.pager:"",k+=f.p.toppager?k?","+f.p.toppager:f.p.toppager:"",k&&(j=$.jgrid.formatter.integer||{},c=m(f.p.page),d=m(f.p.lastpage),$(".selbox",k).attr("disabled",!1),f.p.pginput===!0&&($(".ui-pg-input",k).val(f.p.page),l=f.p.toppager?"#sp_1"+n+",#sp_1"+o:"#sp_1"+n,$(l).html($.fmatter?$.fmatter.util.NumberFormat(f.p.lastpage,j):f.p.lastpage)),f.p.viewrecords&&(f.p.reccount===0?$(".ui-paging-info",k).html(f.p.emptyrecords):(g=e+1,i=f.p.records,$.fmatter&&(g=$.fmatter.util.NumberFormat(g,j),h=$.fmatter.util.NumberFormat(h,j),i=$.fmatter.util.NumberFormat(i,j)),$(".ui-paging-info",k).html($.jgrid.format(f.p.recordtext,g,h,i)))),f.p.pgbuttons===!0&&(c<=0&&(c=d=0),c==1||c===0?($("#first"+n+", #prev"+n).addClass("ui-state-disabled").removeClass("ui-state-hover"),f.p.toppager&&$("#first_t"+o+", #prev_t"+o).addClass("ui-state-disabled").removeClass("ui-state-hover")):($("#first"+n+", #prev"+n).removeClass("ui-state-disabled"),f.p.toppager&&$("#first_t"+o+", #prev_t"+o).removeClass("ui-state-disabled")),c==d||c===0?($("#next"+n+", #last"+n).addClass("ui-state-disabled").removeClass("ui-state-hover"),f.p.toppager&&$("#next_t"+o+", #last_t"+o).addClass("ui-state-disabled").removeClass("ui-state-hover")):($("#next"+n+", #last"+n).removeClass("ui-state-disabled"),f.p.toppager&&$("#next_t"+o+", #last_t"+o).removeClass("ui-state-disabled")))),a===!0&&f.p.rownumbers===!0&&$("td.jqgrid-rownum",f.rows).each(function(a){$(this).html(e+1+a)}),b&&f.p.jqgdnd&&$(f).jqGrid("gridDnD","updateDnD"),$.isFunction(f.p.gridComplete)&&f.p.gridComplete.call(f)},B=function(){f.grid.hDiv.loading=!0;if(!f.p.hiddengrid)switch(f.p.loadui){case"disable":break;case"enable":$("#load_"+$.jgrid.jqID(f.p.id)).show();break;case"block":$("#lui_"+$.jgrid.jqID(f.p.id)).show(),$("#load_"+$.jgrid.jqID(f.p.id)).show()}},C=function(){f.grid.hDiv.loading=!1;switch(f.p.loadui){case"disable":break;case"enable"
:$("#load_"+$.jgrid.jqID(f.p.id)).hide();break;case"block":$("#lui_"+$.jgrid.jqID(f.p.id)).hide(),$("#load_"+$.jgrid.jqID(f.p.id)).hide()}},D=function(a){if(!f.grid.hDiv.loading){var b=f.p.scroll&&a===!1,c={},d,e,g=f.p.prmNames;f.p.page<=0&&(f.p.page=1),g.search!==null&&(c[g.search]=f.p.search),g.nd!==null&&(c[g.nd]=(new Date).getTime()),g.rows!==null&&(c[g.rows]=f.p.rowNum),g.page!==null&&(c[g.page]=f.p.page),g.sort!==null&&(c[g.sort]=f.p.sortname),g.order!==null&&(c[g.order]=f.p.sortorder),f.p.rowTotal!==null&&g.totalrows!==null&&(c[g.totalrows]=f.p.rowTotal);var h=f.p.loadComplete,i=$.isFunction(h);i||(h=null);var j=0;a=a||1,a>1?g.npage!==null?(c[g.npage]=a,j=a-1,a=1):h=function(b){f.p.page++,f.grid.hDiv.loading=!1,i&&f.p.loadComplete.call(f,b),D(a-1)}:g.npage!==null&&delete f.p.postData[g.npage],f.p.grouping&&($(f).jqGrid("groupingSetup"),f.p.groupingView.groupDataSorted===!0&&(c[g.sort]=f.p.groupingView.groupField[0]+" "+f.p.groupingView.groupOrder[0]+", "+c[g.sort])),$.extend(f.p.postData,c);var k=f.p.scroll?f.rows.length-1:1;if($.isFunction(f.p.datatype)){f.p.datatype.call(f,f.p.postData,"load_"+f.p.id);return}$.isFunction(f.p.beforeRequest)&&f.p.beforeRequest.call(f),d=f.p.datatype.toLowerCase();switch(d){case"json":case"jsonp":case"xml":case"script":$.ajax($.extend({url:f.p.url,type:f.p.mtype,dataType:d,data:$.isFunction(f.p.serializeGridData)?f.p.serializeGridData.call(f,f.p.postData):f.p.postData,success:function(c,e){d==="xml"?x(c,f.grid.bDiv,k,a>1,j):y(c,f.grid.bDiv,k,a>1,j),h&&h.call(f,c),b&&f.grid.populateVisible();if(f.p.loadonce||f.p.treeGrid)f.p.datatype="local";c=null,C()},error:function(a,b,c){$.isFunction(f.p.loadError)&&f.p.loadError.call(f,a,b,c),C(),a=null},beforeSend:function(a){B(),$.isFunction(f.p.loadBeforeSend)&&f.p.loadBeforeSend.call(f,a)}},$.jgrid.ajaxOptions,f.p.ajaxGridOptions));break;case"xmlstring":B(),e=$.jgrid.stringToDoc(f.p.datastr),x(e,f.grid.bDiv),i&&f.p.loadComplete.call(f,e),f.p.datatype="local",f.p.datastr=null,C();break;case"jsonstring":B(),typeof f.p.datastr=="string"?e=$.jgrid.parse(f.p.datastr):e=f.p.datastr,y(e,f.grid.bDiv),i&&f.p.loadComplete.call(f,e),f.p.datatype="local",f.p.datastr=null,C();break;case"local":case"clientside":B(),f.p.datatype="local";var l=z();y(l,f.grid.bDiv,k,a>1,j),h&&h.call(f,l),b&&f.grid.populateVisible(),C()}}},E=function(a,b){var c="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>",d="",g="<table cellspacing='0' cellpadding='0' border='0' style='table-layout:auto;' class='ui-pg-table'><tbody><tr>",h="",i,j,k,l,n,o,p,q=function(a){var b;$.isFunction(f.p.onPaging)&&(b=f.p.onPaging.call(f,a)),f.p.selrow=null,f.p.multiselect&&(f.p.selarrrow=[],$("#cb_"+$.jgrid.jqID(f.p.id),f.grid.hDiv).attr("checked",!1)),f.p.savedRow=[];if(b=="stop")return!1;return!0};a=a.substr(1),b+="_"+a,i="pg_"+a,j=a+"_left",k=a+"_center",l=a+"_right",$("#"+$.jgrid.jqID(a)).append("<div id='"+i+"' class='ui-pager-control' role='group'><table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table' style='width:100%;table-layout:fixed;height:100%;' role='row'><tbody><tr><td id='"+j+"' align='left'></td><td id='"+k+"' align='center' style='white-space:pre;'></td><td id='"+l+"' align='right'></td></tr></tbody></table></div>").attr("dir","ltr");if(f.p.rowList.length>0){h="<td dir='"+e+"'>",h+="<select class='ui-pg-selbox' role='listbox'>";for(p=0;p<f.p.rowList.length;p++)h+='<option role="option" value="'+f.p.rowList[p]+'"'+(f.p.rowNum==f.p.rowList[p]?' selected="selected"':"")+">"+f.p.rowList[p]+"</option>";h+="</select></td>"}e=="rtl"&&(g+=h),f.p.pginput===!0&&(d="<td dir='"+e+"'>"+$.jgrid.format(f.p.pgtext||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+$.jgrid.jqID(a)+"'></span>")+"</td>");if(f.p.pgbuttons===!0){var r=["first"+b,"prev"+b,"next"+b,"last"+b];e=="rtl"&&r.reverse(),g+="<td id='"+r[0]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-first'></span></td>",g+="<td id='"+r[1]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-prev'></span></td>",g+=d!==""?c+d+c:"",g+="<td id='"+r[2]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-next'></span></td>",g+="<td id='"+r[3]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-end'></span></td>"}else d!==""&&(g+=d);e=="ltr"&&(g+=h),g+="</tr></tbody></table>",f.p.viewrecords===!0&&$("td#"+a+"_"+f.p.recordpos,"#"+i).append("<div dir='"+e+"' style='text-align:"+f.p.recordpos+"' class='ui-paging-info'></div>"),$("td#"+a+"_"+f.p.pagerpos,"#"+i).append(g),o=$(".ui-jqgrid").css("font-size")||"11px",$(document.body).append("<div id='testpg' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+o+";visibility:hidden;' ></div>"),n=$(g).clone().appendTo("#testpg").width(),$("#testpg").remove(),n>0&&(d!==""&&(n+=50),$("td#"+a+"_"+f.p.pagerpos,"#"+i).width(n)),f.p._nvtd=[],f.p._nvtd[0]=n?Math.floor((f.p.width-n)/2):Math.floor(f.p.width/3),f.p._nvtd[1]=0,g=null,$(".ui-pg-selbox","#"+i).bind("change",function(){f.p.page=Math.round(f.p.rowNum*(f.p.page-1)/this.value-.5)+1,f.p.rowNum=this.value,b?$(".ui-pg-selbox",f.p.pager).val(this.value):f.p.toppager&&$(".ui-pg-selbox",f.p.toppager).val(this.value);if(!q("records"))return!1;D();return!1}),f.p.pgbuttons===!0&&($(".ui-pg-button","#"+i).hover(function(a){$(this).hasClass("ui-state-disabled")?this.style.cursor="default":($(this).addClass("ui-state-hover"),this.style.cursor="pointer")},function(a){$(this).hasClass("ui-state-disabled")||($(this).removeClass("ui-state-hover"),this.style.cursor="default")}),$("#first"+$.jgrid.jqID(b)+", #prev"+$.jgrid.jqID(b)+", #next"+$.jgrid.jqID(b)+", #last"+$.jgrid.jqID(b)).click(function(a){var c=m(f.p.page,1),d=m(f.p.lastpage,1),e=!1,g=!0,h=!0,i=!0,j=!0;d===0||d===1?(g=!1,h=!1,i=!1,j=!1):d>1&&c>=1?c===1?(g=!1,h=!1):c>1&&c<d||c===d&&(i=!1,j=!1):d>1&&c===0&&(i=!1,j=!1,c=d-1),this.id==="first"+b&&g&&(f.p.page=1,e=!0),this.id==="prev"+b&&h&&(f.p.page=c-1,e=!0),this.id==="next"+b&&i&&(f.p.page=c+1,e=!0),this.id==="last"+b&&j&&(f.p.page=d,e=!0);if(e){if(!q(this.id))return!1;D()}return!1})),f.p.pginput===!0&&$("input.ui-pg-input","#"+i).keypress(function(a){var b=a.charCode?a.charCode:a.keyCode?a.keyCode:0;if(b==13){f.p.page=$(this).val()>0?$(this).val():f.p.page;if(!q("user"))return!1;D();return!1}return this})},F=function(a,b,c,d){if(!!f.p.colModel[b].sortable){var e;if(f.p.savedRow.length>0)return;c||(f.p.lastsort==b?f.p.sortorder=="asc"?f.p.sortorder="desc":f.p.sortorder=="desc"&&(f.p.sortorder="asc"):f.p.sortorder=f.p.colModel[b].firstsortorder||"asc",f.p.page=1);if(d){if(f.p.lastsort==b&&f.p.sortorder==d&&!c)return;f.p.sortorder=d}var g=$("thead:first",f.grid.hDiv).get(0);$("tr th:eq("+f.p.lastsort+") span.ui-grid-ico-sort",g).addClass("ui-state-disabled"),$("tr th:eq("+f.p.lastsort+")",g).attr("aria-selected","false"),$("tr th:eq("+b+") span.ui-icon-"+f.p.sortorder,g).removeClass("ui-state-disabled"),$("tr th:eq("+b+")",g).attr("aria-selected","true"),f.p.viewsortcols[0]||f.p.lastsort!=b&&($("tr th:eq("+f.p.lastsort+") span.s-ico",g).hide(),$("tr th:eq("+b+") span.s-ico",g).show()),a=a.substring(5+f.p.id.length+1),f.p.sortname=f.p.colModel[b].index||a,e=f.p.sortorder;if($.isFunction(f.p.onSortCol)&&f.p.onSortCol.call(f,a,b,e)=="stop"){f.p.lastsort=b;return}f.p.datatype=="local"?f.p.deselectAfterSort&&$(f).jqGrid("resetSelection"):(f.p.selrow=null,f.p.multiselect&&$("#cb_"+$.jgrid.jqID(f.p.id),f.grid.hDiv).attr("checked",!1),f.p.selarrrow=[],f.p.savedRow=[]);if(f.p.scroll){var h=f.grid.bDiv.scrollLeft;v(f.grid.bDiv,!0,!1),f.grid.hDiv.scrollLeft=h}f.p.subGrid&&f.p.datatype=="local"&&$("td.sgexpanded","#"+$.jgrid.jqID(f.p.id)).each(function(){$(this).trigger("click")}),D(),f.p.lastsort=b,f.p.sortname!=a&&b&&(f.p.lastsort=b)}},G=function(){var a=0,b=j?0:f.p.cellLayout,d=0,e,g=f.p.scrollOffset,h,i=!1,k,l=0,n=0,o;$.each(f.p.colModel,function(c){typeof this.hidden=="undefined"&&(this.hidden=!1),this.widthOrg=h=m(this.width,0),this.hidden===!1&&(a+=h+b,this.fixed?l+=h+b:d++,n++)}),isNaN(f.p.width)?f.p.width=c.width=a:c.width=f.p.width,f.p.tblwidth=a,f.p.shrinkToFit===!1&&f.p.forceFit===!0&&(f.p.forceFit=!1),f.p.shrinkToFit===!0&&d>0&&(k=c.width-b*d-l,isNaN(f.p.height)||(k-=g,i=!0),a=0,$.each(f.p.colModel,function(c){this.hidden===!1&&!this.fixed&&(h=Math.round(k*this.width/(f.p.tblwidth-b*d-l)),this.width=h,a+=h,e=c)}),o=0,i?c.width-l-(a+b*d)!==g&&(o=c.width-l-(a+b*d)-g):!i&&Math.abs(c.width-l-(a+b*d))!==1&&(o=c.width-l-(a+b*d)),f.p.colModel[e].width+=o,f.p.tblwidth=a+o+b*d+l,f.p.tblwidth>f.p.width&&(f.p.colModel[e].width-=f.p.tblwidth-parseInt(f.p.width,10),f.p.tblwidth=f.p.width))},H=function(a){var b=a,c=a,d;for(d=a+1;d<f.p.colModel.length;d++)if(f.p.colModel[d].hidden!==!0){c=d;break}return c-b},I=function(a){var b,c={},d=j?0:f.p.cellLayout;c[0]=c[1]=c[2]=0;for(b=0;b<=a;b++)f.p.colModel[b].hidden===!1&&(c[0]+=f.p.colModel[b].width+d);f.p.direction=="rtl"&&(c[0]=f.p.width-c[0]),c[0]=c[0]-f.grid.bDiv.scrollLeft,$(f.grid.cDiv).is(":visible")&&(c[1]+=$(f.grid.cDiv).height()+parseInt($(f.grid.cDiv).css("padding-top"),10)+parseInt($(f.grid.cDiv).css("padding-bottom"),10)),f.p.toolbar[0]===!0&&(f.p.toolbar[1]=="top"||f.p.toolbar[1]=="both")&&(c[1]+=$(f.grid.uDiv).height()+parseInt($(f.grid.uDiv).css("border-top-width"),10)+parseInt($(f.grid.uDiv).css("border-bottom-width"),10)),f.p.toppager&&(c[1]+=$(f.grid.topDiv).height()+parseInt($(f.grid.topDiv).css("border-bottom-width"),10)),c[2]+=$(f.grid.bDiv).height()+$(f.grid.hDiv).height();return c};this.p.id=this.id,$.inArray(f.p.multikey,l)==-1&&(f.p.multikey=!1),f.p.keyIndex=!1;for(d=0;d<f.p.colModel.length;d++)f.p.colModel[d]=$.extend(!0,{},f.p.cmTemplate,f.p.colModel[d].template||{},f.p.colModel[d]),f.p.keyIndex===!1&&f.p.colModel[d].key===!0&&(f.p.keyIndex=d);f.p.sortorder=f.p.sortorder.toLowerCase(),f.p.grouping===!0&&(f.p.scroll=!1,f.p.rownumbers=!1,f.p.subGrid=!1,f.p.treeGrid=!1,f.p.gridview=!0);if(this.p.treeGrid===!0){try{$(this).jqGrid("setTreeGrid")}catch(J){}f.p.datatype!="local"&&(f.p.localReader={id:"_id_"})}if(this.p.subGrid)try{$(f).jqGrid("setSubGrid")}catch(K){}this.p.multiselect&&(this.p.colNames.unshift("<input role='checkbox' id='cb_"+this.p.id+"' class='cbox' type='checkbox'/>"),this.p.colModel.unshift({name:"cb",width:j?f.p.multiselectWidth+f.p.cellLayout:f.p.multiselectWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0})),this.p.rownumbers&&(this.p.colNames.unshift(""),this.p.colModel.unshift({name:"rn",width:f.p.rownumWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0})),f.p.xmlReader=$.extend(!0,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:!0,cell:"cell"}},f.p.xmlReader),f.p.jsonReader=$.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},f.p.jsonReader),f.p.localReader=$.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},f.p.localReader),f.p.scroll&&(f.p.pgbuttons=!1,f.p.pginput=!1,f.p.rowList=[]),f.p.data.length&&w();var L="<thead><tr class='ui-jqgrid-labels' role='rowheader'>",M,N,O,P,Q,R,S,T,U,V="",W="";if(f.p.shrinkToFit===!0&&f.p.forceFit===!0)for(d=f.p.colModel.length-1;d>=0;d--)if(!f.p.colModel[d].hidden){f.p.colModel[d].resizable=!1;break}f.p.viewsortcols[1]=="horizontal"&&(V=" ui-i-asc",W=" ui-i-desc"),M=i?"class='ui-th-div-ie'":"",U="<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc"+V+" ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-"+e+"'></span>",U+="<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+W+" ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-"+e+"'></span></span>";for(d=0;d<this.p.colNames.length;d++){var X=f.p.headertitles?' title="'+$.jgrid.stripHtml(f.p.colNames[d])+'"':"";L+="<th id='"+f.p.id+"_"+f.p.colModel[d].name+"' role='columnheader' class='ui-state-default ui-th-column ui-th-"+e+"'"+X+">",N=f.p.colModel[d].index||f.p.colModel[d].name,L+="<div id='jqgh_"+f.p.id+"_"+f.p.colModel[d].name+"' "+M+">"+f.p.colNames[d],f.p.colModel[d].width?f.p.colModel[d].width=parseInt(f.p.colModel[d].width,10):f.p.colModel[d].width=150,typeof f.p.colModel[d].title!="boolean"&&(f.p.colModel[d].title=!0),N==f.p.sortname&&(f.p.lastsort=d),L+=U+"</div></th>"}L+="</tr></thead>",U=null,$(this).append(L),$("thead tr:first th",this).hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")});if(this.p.multiselect){var Y=[],Z;$("#cb_"+$.jgrid.jqID(f.p.id),this).bind("click",function(){f.p.selarrrow=[],this.checked?($(f.rows).each(function(a){a>0&&!$(this).hasClass("subgrid")&&!$(this).hasClass("jqgroup")&&!$(this).hasClass("ui-state-disabled")&&($("#jqg_"+$.jgrid.jqID(f.p.id)+"_"+$.jgrid.jqID(this.id)).attr("checked","checked"),$(this).addClass("ui-state-highlight").attr("aria-selected","true"),f.p.selarrrow.push(this.id),f.p.selrow=this.id)}),Z=!0,Y=[]):($(f.rows).each(function(a){a>0&&!$(this).hasClass("subgrid")&&!$(this).hasClass("ui-state-disabled")&&($("#jqg_"+$.jgrid.jqID(f.p.id)+"_"+$.jgrid.jqID(this.id)).removeAttr("checked"),$(this).removeClass("ui-state-highlight").attr("aria-selected","false"),Y.push(this.id))}),f.p.selrow=null,Z=!1),$.isFunction(f.p.onSelectAll)&&f.p.onSelectAll.call(f,Z?f.p.selarrrow:Y,Z)})}if(f.p.autowidth===!0){var _=$(k).innerWidth();f.p.width=_>0?_:"nw"}G(),$(k).css("width",c.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+f.p.id+"'>&#160;</div>"),$(g).css("width",c.width+"px"),L=$("thead:first",f).get(0);var ba="";f.p.footerrow&&(ba+="<table role='grid' style='width:"+f.p.tblwidth+"px' class='ui-jqgrid-ftable' cellspacing='0' cellpadding='0' border='0'><tbody><tr role='row' class='ui-widget-content footrow footrow-"+e+"'>");var bb=$("tr:first",L),bc="<tr class='jqgfirstrow' role='row' style='height:auto'>";f.p.disableClick=!1,$("th",bb).each(function(a){O=f.p.colModel[a].width,typeof f.p.colModel[a].resizable=="undefined"&&(f.p.colModel[a].resizable=!0),f.p.colModel[a].resizable?(P=document.createElement("span"),$(P).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+e),$.browser.opera||$(P).css("cursor","col-resize"),$(this).addClass(f.p.resizeclass)):P="",$(this).css("width",O+"px").prepend(P);var b="";f.p.colModel[a].hidden&&($(this).css("display","none"),b="display:none;"),bc+="<td role='gridcell' style='height:0px;width:"+O+"px;"+b+"'></td>",c.headers[a]={width:O,el:this},Q=f.p.colModel[a].sortable,typeof Q!="boolean"&&(f.p.colModel[a].sortable=!0,Q=!0);var d=f.p.colModel[a].name;d!="cb"&&d!="subgrid"&&d!="rn"&&f.p.viewsortcols[2]&&$("div",this).addClass("ui-jqgrid-sortable"),Q&&(f.p.viewsortcols[0]?($("div span.s-ico",this).show(),a==f.p.lastsort&&$("div span.ui-icon-"+f.p.sortorder,this).removeClass("ui-state-disabled")):a==f.p.lastsort&&($("div span.s-ico",this).show(),$("div span.ui-icon-"+f.p.sortorder,this).removeClass("ui-state-disabled"))),f.p.footerrow&&(ba+="<td role='gridcell' "+n(a,0,"",null,"",!1)+">&#160;</td>")}).mousedown(function(a){if($(a.target).closest("th>span.ui-jqgrid-resize").length==1){var b=$.jgrid.getCellIndex(this);f.p.forceFit===!0&&(f.p.nv=H(b)),c.dragStart(b,a,I(b));return!1}}).click(function(a){if(f.p.disableClick){f.p.disableClick=!1;return!1}var b="th>div.ui-jqgrid-sortable",c,d;f.p.viewsortcols[2]||(b="th>div>span>span.ui-grid-ico-sort");var e=$(a.target).closest(b);if(e.length==1){var g=$.jgrid.getCellIndex(this);f.p.viewsortcols[2]||(c=!0,d=e.attr("sort")),F($("div",this)[0].id,g,c,d);return!1}});if(f.p.sortable&&$.fn.sortable)try{$(f).jqGrid("sortableColumns",bb)}catch(bd){}f.p.footerrow&&(ba+="</tr></tbody></table>"),bc+="</tr>",T=document.createElement("tbody"),this.appendChild(T),$(this).addClass("ui-jqgrid-btable").append(bc),bc=null;var be=$("<table class='ui-jqgrid-htable' style='width:"+f.p.tblwidth+"px' role='grid' aria-labelledby='gbox_"+this.id+"' cellspacing='0' cellpadding='0' border='0'></table>").append(L),bf=f.p.caption&&f.p.hiddengrid===!0?!0:!1,bg=$("<div class='ui-jqgrid-hbox"+(e=="rtl"?"-rtl":"")+"'></div>");L=null,c.hDiv=document.createElement("div"),$(c.hDiv).css({width:c.width+"px"}).addClass("ui-state-default ui-jqgrid-hdiv").append(bg),$(bg).append(be),be=null,bf&&$(c.hDiv).hide(),f.p.pager&&(typeof f.p.pager=="string"?f.p.pager.substr(0,1)!="#"&&(f.p.pager="#"+f.p.pager):f.p.pager="#"+$(f.p.pager).attr("id"),$(f.p.pager).css({width:c.width+"px"}).appendTo(k).addClass("ui-state-default ui-jqgrid-pager ui-corner-bottom"),bf&&$(f.p.pager).hide(),E(f.p.pager,"")),f.p.cellEdit===!1&&f.p.hoverrows===!0&&$(f).bind("mouseover",function(a){S=$(a.target).closest("tr.jqgrow"),$(S).attr("class")!=="subgrid"&&$(S).addClass("ui-state-hover");return!1}).bind("mouseout",function(a){S=$(a.target).closest("tr.jqgrow"),$(S).removeClass("ui-state-hover");return!1});var bh,bi;$(f).before(c.hDiv).click(function(a){R=a.target,S=$(R,f.rows).closest("tr.jqgrow");if($(S).length===0||S[0].className.indexOf("ui-state-disabled")>-1)return this;var b=$(R).hasClass("cbox"),c=!0;$.isFunction(f.p.beforeSelectRow)&&(c=f.p.beforeSelectRow.call(f,S[0].id,a));if(R.tagName=="A"||(R.tagName=="INPUT"||R.tagName=="TEXTAREA"||R.tagName=="OPTION"||R.tagName=="SELECT")&&!b)return this;if(c===!0){if(f.p.cellEdit===!0)if(f.p.multiselect&&b)$(f).jqGrid("setSelection",S[0].id,!0);else{bh=S[0].rowIndex,bi=$.jgrid.getCellIndex(R);try{$(f).jqGrid("editCell",bh,bi,!0)}catch(d){}}else f.p.multikey?a[f.p.multikey]?$(f).jqGrid("setSelection",S[0].id,!0):f.p.multiselect&&b&&(b=$("#jqg_"+$.jgrid.jqID(f.p.id)+"_"+S[0].id).attr("checked"),$("#jqg_"+$.jgrid.jqID(f.p.id)+"_"+S[0].id).attr("checked",!b)):f.p.multiselect&&f.p.multiboxonly?b?$(f).jqGrid("setSelection",S[0].id,!0):($(f.p.selarrrow).each(function(a,b){var c=f.rows.namedItem(b);$(c).removeClass("ui-state-highlight"),$("#jqg_"+$.jgrid.jqID(f.p.id)+"_"+$.jgrid.jqID(b)).attr("checked",!1)}),f.p.selarrrow=[],$("#cb_"+$.jgrid.jqID(f.p.id),f.grid.hDiv).attr("checked",!1),$(f).jqGrid("setSelection",S[0].id,!0)):$(f).jqGrid("setSelection",S[0].id,!0);$.isFunction(f.p.onCellSelect)&&(bh=S[0].id,bi=$.jgrid.getCellIndex(R),f.p.onCellSelect.call(f,bh,bi,$(R).html(),a))}return this}).bind("reloadGrid",function(a,b){f.p.treeGrid===!0&&(f.p.datatype=f.p.treedatatype),b&&b.current&&f.grid.selectionPreserver(f),f.p.datatype=="local"?($(f).jqGrid("resetSelection"),f.p.data.length&&w()):f.p.treeGrid||(f.p.selrow=null,f.p.multiselect&&(f.p.selarrrow=[],$("#cb_"+$.jgrid.jqID(f.p.id),f.grid.hDiv).attr("checked",!1)),f.p.savedRow=[]),f.p.scroll&&v(f.grid.bDiv,!0,!1);if(b&&b.page){var c=b.page;c>f.p.lastpage&&(c=f.p.lastpage),c<1&&(c=1),f.p.page=c,f.grid.prevRowHeight?f.grid.bDiv.scrollTop=(c-1)*f.grid.prevRowHeight*f.p.rowNum:f.grid.bDiv.scrollTop=0}f.grid.prevRowHeight&&f.p.scroll?(delete f.p.lastpage,f.grid.populateVisible()):f.grid.populate();return!1}),$.isFunction(this.p.ondblClickRow)&&$(this).dblclick(function(a){R=a.target,S=$(R,f.rows).closest("tr.jqgrow");if($(S).length===0)return!1;bh=S[0].rowIndex,bi=$.jgrid.getCellIndex(R),f.p.ondblClickRow.call(f,$(S).attr("id"),bh,bi,a);return!1}),$.isFunction(this.p.onRightClickRow)&&$(this).bind("contextmenu",function(a){R=a.target,S=$(R,f.rows).closest("tr.jqgrow");if($(S).length===0)return!1;f.p.multiselect||$(f).jqGrid("setSelection",S[0].id,!0),bh=S[0].rowIndex,bi=$.jgrid.getCellIndex(R),f.p.onRightClickRow.call(f,$(S).attr("id"),bh,bi,a);return!1}),c.bDiv=document.createElement("div"),i&&String(f.p.height).toLowerCase()==="auto"&&(f.p.height="100%"),$(c.bDiv).append($('<div style="position:relative;'+(i&&$.browser.version<8?"height:0.01%;":"")+'"></div>').append("<div></div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:f.p.height+(isNaN(f.p.height)?"":"px"),width:c.width+"px"}).scroll(c.scrollGrid),$("table:first",c.bDiv).css({width:f.p.tblwidth+"px"}),i?($("tbody",this).size()==2&&$("tbody:gt(0)",this).remove(),f.p.multikey&&$(c.bDiv).bind("selectstart",function(){return!1})):f.p.multikey&&$(c.bDiv).bind("mousedown",function(){return!1}),bf&&$(c.bDiv).hide(),c.cDiv=document.createElement("div");var bj=f.p.hidegrid===!0?$("<a role='link' href='javascript:void(0)'/>").addClass("ui-jqgrid-titlebar-close HeaderButton").hover(function(){bj.addClass("ui-state-hover")},function(){bj.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-circle-triangle-n'></span>").css(e=="rtl"?"left":"right","0px"):"";$(c.cDiv).append(bj).append("<span class='ui-jqgrid-title"+(e=="rtl"?"-rtl":"")+"'>"+f.p.caption+"</span>").addClass("ui-jqgrid-titlebar ui-widget-header ui-corner-top ui-helper-clearfix"),$(c.cDiv).insertBefore(c.hDiv),f.p.toolbar[0]&&(c.uDiv=document.createElement("div"),f.p.toolbar[1]=="top"?$(c.uDiv).insertBefore(c.hDiv):f.p.toolbar[1]=="bottom"&&$(c.uDiv).insertAfter(c.hDiv),f.p.toolbar[1]=="both"?(c.ubDiv=document.createElement("div"),$(c.uDiv).insertBefore(c.hDiv).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id),$(c.ubDiv).insertAfter(c.hDiv).addClass("ui-userdata ui-state-default").attr("id","tb_"+this.id),bf&&$(c.ubDiv).hide()):$(c.uDiv).width(c.width).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id),bf&&$(c.uDiv).hide()),f.p.toppager&&(f.p.toppager=$.jgrid.jqID(f.p.id)+"_toppager",c.topDiv=$("<div id='"+f.p.toppager+"'></div>")[0],f.p.toppager="#"+f.p.toppager,$(c.topDiv).insertBefore(c.hDiv).addClass("ui-state-default ui-jqgrid-toppager").width(c.width),E(f.p.toppager,"_t")),f.p.footerrow&&(c.sDiv=$("<div class='ui-jqgrid-sdiv'></div>")[0],bg=$("<div class='ui-jqgrid-hbox"+(e=="rtl"?"-rtl":"")+"'></div>"),$(c.sDiv).append(bg).insertAfter(c.hDiv).width(c.width),$(bg).append(ba),c.footers=$(".ui-jqgrid-ftable",c.sDiv)[0].rows[0].cells,f.p.rownumbers&&(c.footers[0].className="ui-state-default jqgrid-rownum"),bf&&$(c.sDiv).hide()),bg=null;if(f.p.caption){var bk=f.p.datatype;f.p.hidegrid===!0&&($(".ui-jqgrid-titlebar-close",c.cDiv).click(function(a){var b=$.isFunction(f.p.onHeaderClick),d=".ui-jqgrid-bdiv, .ui-jqgrid-hdiv, .ui-jqgrid-pager, .ui-jqgrid-sdiv",e,g=this;f.p.toolbar[0]===!0&&(f.p.toolbar[1]=="both"&&(d+=", #"+$(c.ubDiv).attr("id")),d+=", #"+$(c.uDiv).attr("id")),e=$(d,"#gview_"+$.jgrid.jqID(f.p.id)).length,f.p.gridstate=="visible"?$(d,"#gbox_"+$.jgrid.jqID(f.p.id)).slideUp("fast",function(){e--,e===0&&($("span",g).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),f.p.gridstate="hidden",$("#gbox_"+$.jgrid.jqID(f.p.id)).hasClass("ui-resizable")&&$(".ui-resizable-handle","#gbox_"+$.jgrid.jqID(f.p.id)).hide(),b&&(bf||f.p.onHeaderClick.call(f,f.p.gridstate,a)))}):f.p.gridstate=="hidden"&&$(d,"#gbox_"+$.jgrid.jqID(f.p.id)).slideDown("fast",function(){e--,e===0&&($("span",g).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),bf&&(f.p.datatype=bk,D(),bf=!1),f.p.gridstate="visible",$("#gbox_"+$.jgrid.jqID(f.p.id)).hasClass("ui-resizable")&&$(".ui-resizable-handle","#gbox_"+$.jgrid.jqID(f.p.id)).show(),b&&(bf||f.p.onHeaderClick.call(f,f.p.gridstate,a)))});return!1}),bf&&(f.p.datatype="local",$(".ui-jqgrid-titlebar-close",c.cDiv).trigger("click")))}else $(c.cDiv).hide();$(c.hDiv).after(c.bDiv).mousemove(function(a){if(c.resizing){c.dragMove(a);return!1}}),$(".ui-jqgrid-labels",c.hDiv).bind("selectstart",function(){return!1}),$(document).mouseup(function(a){if(c.resizing){c.dragEnd();return!1}return!0}),f.formatCol=n,f.sortData=F,f.updatepager=A,f.refreshIndex=w,f.formatter=function(a,b,c,d,e){return p(a,b,c,d,e)},$.extend(c,{populate:D,emptyRows:v}),this.grid=c,f.addXmlData=function(a){x(a,f.grid.bDiv)},f.addJSONData=function(a){y(a,f.grid.bDiv)},this.grid.cols=this.rows[0].cells,D(),f.p.hiddengrid=!1,$(window).unload(function(){f=null})}})},$.jgrid.extend({getGridParam:function(a){var b=this[0];if(!!b&&!!b.grid)return a?typeof b.p[a]!="undefined"?b.p[a]:null:b.p},setGridParam:function(a){return this.each(function(){this.grid&&typeof a=="object"&&$.extend(!0,this.p,a)})},getDataIDs:function(){var a=[],b=0,c,d=0;this.each(function(){c=this.rows.length;if(c&&c>0)while(b<c)$(this.rows[b]).hasClass("jqgrow")&&(a[d]=this.rows[b].id,d++),b++});return a},setSelection:function(a,b){return this.each(function(){function i(a){var b=$(c.grid.bDiv)[0].clientHeight,d=$(c.grid.bDiv)[0].scrollTop,e=c.rows[a].offsetTop,f=c.rows[a].clientHeight;e+f>=b+d?$(c.grid.bDiv)[0].scrollTop=e-(b+d)+f+d:e<b+d&&e<d&&($(c.grid.bDiv)[0].scrollTop=e)}var c=this,d,e,f,g,h;if(a!==undefined){b=b===!1?!1:!0,e=c.rows.namedItem(a+"");if(!e||e.className.indexOf("ui-state-disabled")>-1)return;c.p.scrollrows===!0&&(f=c.rows.namedItem(a).rowIndex,f>=0&&i(f)),c.p.multiselect?(c.p.selrow=e.id,g=$.inArray(c.p.selrow,c.p.selarrrow),g===-1?(e.className!=="ui-subgrid"&&$(e).addClass("ui-state-highlight").attr("aria-selected","true"),d=!0,$("#jqg_"+$.jgrid.jqID(c.p.id)+"_"+$.jgrid.jqID(c.p.selrow)).attr("checked",d),c.p.selarrrow.push(c.p.selrow)):(e.className!=="ui-subgrid"&&$(e).removeClass("ui-state-highlight").attr("aria-selected","false"),d=!1,$("#jqg_"+$.jgrid.jqID(c.p.id)+"_"+$.jgrid.jqID(c.p.selrow)).attr("checked",d),c.p.selarrrow.splice(g,1),h=c.p.selarrrow[0],c.p.selrow=h===undefined?null:h),c.p.onSelectRow&&b&&c.p.onSelectRow.call(c,e.id,d)):e.className!=="ui-subgrid"&&(c.p.selrow!=e.id?($(c.rows.namedItem(c.p.selrow)).removeClass("ui-state-highlight").attr({"aria-selected":"false",tabindex:"-1"}),$(e).addClass("ui-state-highlight").attr({"aria-selected":!0,tabindex:"0"}),d=!0):d=!1,c.p.selrow=e.id,c.p.onSelectRow&&b&&c.p.onSelectRow.call(c,e.id,d))}})},resetSelection:function(a){return this.each(function(){var b=this,c,d;typeof a!="undefined"?(d=a===b.p.selrow?b.p.selrow:a,$("#"+$.jgrid.jqID(b.p.id)+" tbody:first tr#"+$.jgrid.jqID(d)).removeClass("ui-state-highlight").attr("aria-selected","false"),b.p.multiselect&&($("#jqg_"+$.jgrid.jqID(b.p.id)+"_"+$.jgrid.jqID(d)).attr("checked",!1),$("#cb_"+$.jgrid.jqID(b.p.id)).attr("checked",!1)),d=null):b.p.multiselect?($(b.p.selarrrow).each(function(a,d){c=b.rows.namedItem(d),$(c).removeClass("ui-state-highlight").attr("aria-selected","false"),$("#jqg_"+$.jgrid.jqID(b.p.id)+"_"+$.jgrid.jqID(d)).attr("checked",!1)}),$("#cb_"+$.jgrid.jqID(b.p.id)).attr("checked",!1),b.p.selarrrow=[]):b.p.selrow&&($("#"+$.jgrid.jqID(b.p.id)+" tbody:first tr#"+$.jgrid.jqID(b.p.selrow)).removeClass("ui-state-highlight").attr("aria-selected","false"),b.p.selrow=null),b.p.savedRow=[]})},getRowData:function(a){var b={},c,d=!1,e,f=0;this.each(function(){var g=this,h,i;if(typeof a=="undefined")d=!0,c=[],e=g.rows.length;else{i=g.rows.namedItem(a);if(!i)return b;e=2}while(f<e)d&&(i=g.rows[f]),$(i).hasClass("jqgrow")&&($("td",i).each(function(a){h=g.p.colModel[a].name;if(h!=="cb"&&h!=="subgrid"&&h!=="rn")if(g.p.treeGrid===!0&&h==g.p.ExpandColumn)b[h]=$.jgrid.htmlDecode($("span:first",this).html());else try{b[h]=$.unformat(this,{rowId:i.id,colModel:g.p.colModel[a]},a)}catch(c){b[h]=$.jgrid.htmlDecode($(this).html())}}),d&&(c.push(b),b={})),f++});return c?c:b},delRowData:function(a){var b=!1,c,d,e;this.each(function(){var f=this;c=f.rows.namedItem(a);if(!c)return!1;e=c.rowIndex,$(c).remove(),f.p.records--,f.p.reccount--,f.updatepager(!0,!1),b=!0,f.p.multiselect&&(d=$.inArray(a,f.p.selarrrow),d!=-1&&f.p.selarrrow.splice(d,1)),a==f.p.selrow&&(f.p.selrow=null);if(f.p.datatype=="local"){var g=f.p._index[a];typeof g!="undefined"&&(f.p.data.splice(g,1),f.refreshIndex())}if(f.p.altRows===!0&&b){var h=f.p.altclass;$(f.rows).each(function(a){a%2==1?$(this).addClass(h):$(this).removeClass(h)})}});return b},setRowData:function(a,b,c){var d,e=!0,f;this.each(function(){if(!this.grid)return!1;var g=this,h,i,j=typeof c,k={};i=g.rows.namedItem(a);if(!i)return!1;if(b)try{$(this.p.colModel).each(function(c){d=this.name,b[d]!==undefined&&(k[d]=this.formatter&&typeof this.formatter=="string"&&this.formatter=="date"?$.unformat.date(b[d],this):b[d],h=g.formatter(a,b[d],c,b,"edit"),f=this.title?{title:$.jgrid.stripHtml(h)}:{},g.p.treeGrid===!0&&d==g.p.ExpandColumn?$("td:eq("+c+") > span:first",i).html(h).attr(f):$("td:eq("+c+")",i).html(h).attr(f))});if(g.p.datatype=="local"){var l=g.p._index[a];if(g.p.treeGrid)for(var m in g.p.treeReader)k.hasOwnProperty(g.p.treeReader[m])&&delete k[g.p.treeReader[m]];typeof l!="undefined"&&(g.p.data[l]=$.extend(!0,g.p.data[l],k)),k=null}}catch(n){e=!1}e&&(j==="string"?$(i).addClass(c):j==="object"&&$(i).css(c))});return e},addRowData:function(a,b,c,d){c||(c="last");var e=!1,f,g,h,i,j,k,l,m,n="",o,p,q,r,s;b&&($.isArray(b)?(o=!0,c="last",p=a):(b=[b],o=!1),this.each(function(){var t=this,u=b.length;j=t.p.rownumbers===!0?1:0,h=t.p.multiselect===!0?1:0,i=t.p.subGrid===!0?1:0,o||(typeof a!="undefined"?a=a+"":(a=$.jgrid.randId(),t.p.keyIndex!==!1&&(p=t.p.colModel[t.p.keyIndex+h+i+j].name,typeof b[0][p]!="undefined"&&(a=b[0][p])))),q=t.p.altclass;var w=0,x="",y={},z=$.isFunction(t.p.afterInsertRow)?!0:!1;while(w<u){r=b[w],g="";if(o){try{a=r[p]}catch(A){a=$.jgrid.randId()}x=t.p.altRows===!0?(t.rows.length-1)%2===0?q:"":""}j&&(n=t.formatCol(0,1,"",null,a,!0),g+='<td role="gridcell" aria-describedby="'+t.p.id+'_rn" class="ui-state-default jqgrid-rownum" '+n+">0</td>"),h&&(m='<input role="checkbox" type="checkbox" id="jqg_'+t.p.id+"_"+a+'" class="cbox"/>',n=t.formatCol(j,1,"",null,a,!0),g+='<td role="gridcell" aria-describedby="'+t.p.id+'_cb" '+n+">"+m+"</td>"),i&&(g+=$(t).jqGrid("addSubGridCell",h+j,1));for(l=h+i+j;l<t.p.colModel.length;l++)s=t.p.colModel[l],f=s.name,y[f]=s.formatter&&typeof s.formatter=="string"&&s.formatter=="date"?$.unformat.date(r[f],s):r[f],m=t.formatter(a,$.jgrid.getAccessor(r,f),l,r,"edit"),n=t.formatCol(l,1,m,a,r,!0),g+='<td role="gridcell" aria-describedby="'+t.p.id+"_"+f+'" '+n+">"+m+"</td>";g='<tr id="'+a+'" role="row" tabindex="-1" class="ui-widget-content jqgrow ui-row-'+t.p.direction+" "+x+'">'+g+"</tr>";if(t.rows.length===0)$("table:first",t.grid.bDiv).append(g);else switch(c){case"last":$(t.rows[t.rows.length-1]).after(g),k=t.rows.length-1;break;case"first":$(t.rows[0]).after(g),k=1;break;case"after":k=t.rows.namedItem(d),k&&($(t.rows[k.rowIndex+1]).hasClass("ui-subgrid")?$(t.rows[k.rowIndex+1]).after(g):$(k).after(g)),k++;break;case"before":k=t.rows.namedItem(d),k&&($(k).before(g),k=k.rowIndex),k--}t.p.subGrid===!0&&$(t).jqGrid("addSubGrid",h+j,k),t.p.records++,t.p.reccount++,z&&t.p.afterInsertRow.call(t,a,r,r),w++,t.p.datatype=="local"&&(y[t.p.localReader.id]=a,t.p._index[a]=t.p.data.length,t.p.data.push(y),y={})}t.p.altRows===!0&&!o&&(c=="last"?(t.rows.length-1)%2==1&&$(t.rows[t.rows.length-1]).addClass(q):$(t.rows).each(function(a){a%2==1?$(this).addClass(q):$(this).removeClass(q)})),t.updatepager(!0,!0),e=!0}));return e},footerData:function(a,b,c){function h(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}var d,e=!1,f={},g;typeof a=="undefined"&&(a="get"),typeof c!="boolean"&&(c=!0),a=a.toLowerCase(),this.each(function(){var i=this,j;if(!i.grid||!i.p.footerrow)return!1;if(a=="set"&&h(b))return!1;e=!0,$(this.p.colModel).each(function(h){d=this.name,a=="set"?b[d]!==undefined&&(j=c?i.formatter("",b[d],h,b,"edit"):b[d],g=this.title?{title:$.jgrid.stripHtml(j)}:{},$("tr.footrow td:eq("+h+")",i.grid.sDiv).html(j).attr(g),e=!0):a=="get"&&(f[d]=$("tr.footrow td:eq("+h+")",i.grid.sDiv).html())})});return a=="get"?f:e},showHideCol:function(a,b){return this.each(function(){var c=this,d=!1,e=$.browser.webkit||$.browser.safari?0:c.p.cellLayout,f;if(!!c.grid){typeof a=="string"&&(a=[a]),b=b!="none"?"":"none";var g=b===""?!0:!1;$(this.p.colModel).each(function(h){$.inArray(this.name,a)!==-1&&this.hidden===g&&($("tr",c.grid.hDiv).each(function(){$(this).children("th:eq("+h+")").css("display",b)}),$(c.rows).each(function(a){$(this).children("td:eq("+h+")").css("display",b)}),c.p.footerrow&&$("tr.footrow td:eq("+h+")",c.grid.sDiv).css("display",b),f=this.widthOrg?this.widthOrg:parseInt(this.width,10),b==="none"?c.p.tblwidth-=f+e:c.p.tblwidth+=f+e,this.hidden=!g,d=!0)}),d===!0&&(c.p.shrinkToFit===!1?$(c).jqGrid("setGridWidth",c.grid.width):c.grid.width!==c.p.tblwidth&&$(c).jqGrid("setGridWidth",c.p.tblwidth))}})},hideCol:function(a){return this.each(function(){$(this).jqGrid("showHideCol",a,"none")})},showCol:function(a){return this.each(function(){$(this).jqGrid("showHideCol",a,"")})},remapColumns:function(a,b,c){function f(b,c){$(">tr"+(c||""),b).each(function(){var b=this,c=$.makeArray(b.cells);$.each(a,function(){var a=c[this];a&&b.appendChild(a)})})}function d(b){var c;b.length?c=$
.makeArray(b):c=$.extend({},b),$.each(a,function(a){b[a]=c[this]})}var e=this.get(0);d(e.p.colModel),d(e.p.colNames),d(e.grid.headers),f($("thead:first",e.grid.hDiv),c&&":not(.ui-jqgrid-labels)"),b&&f($("#"+$.jgrid.jqID(e.p.id)+" tbody:first"),".jqgfirstrow, tr.jqgrow, tr.jqfoot"),e.p.footerrow&&f($("tbody:first",e.grid.sDiv)),e.p.remapColumns&&(e.p.remapColumns.length?d(e.p.remapColumns):e.p.remapColumns=$.makeArray(a)),e.p.lastsort=$.inArray(e.p.lastsort,a),e.p.treeGrid&&(e.p.expColInd=$.inArray(e.p.expColInd,a))},setGridWidth:function(a,b){return this.each(function(){if(!!this.grid){var c=this,d,e=0,f=$.browser.webkit||$.browser.safari?0:c.p.cellLayout,g,h=0,i=!1,j=c.p.scrollOffset,k,l=0,m=0,n;typeof b!="boolean"&&(b=c.p.shrinkToFit);if(isNaN(a))return;a=parseInt(a,10),c.grid.width=c.p.width=a,$("#gbox_"+$.jgrid.jqID(c.p.id)).css("width",a+"px"),$("#gview_"+$.jgrid.jqID(c.p.id)).css("width",a+"px"),$(c.grid.bDiv).css("width",a+"px"),$(c.grid.hDiv).css("width",a+"px"),c.p.pager&&$(c.p.pager).css("width",a+"px"),c.p.toppager&&$(c.p.toppager).css("width",a+"px"),c.p.toolbar[0]===!0&&($(c.grid.uDiv).css("width",a+"px"),c.p.toolbar[1]=="both"&&$(c.grid.ubDiv).css("width",a+"px")),c.p.footerrow&&$(c.grid.sDiv).css("width",a+"px"),b===!1&&c.p.forceFit===!0&&(c.p.forceFit=!1);if(b===!0){$.each(c.p.colModel,function(a){this.hidden===!1&&(d=this.widthOrg?this.widthOrg:parseInt(this.width,10),e+=d+f,this.fixed?l+=d+f:h++,m++)});if(h===0)return;c.p.tblwidth=e,k=a-f*h-l,!isNaN(c.p.height)&&($(c.grid.bDiv)[0].clientHeight<$(c.grid.bDiv)[0].scrollHeight||c.rows.length===1)&&(i=!0,k-=j),e=0;var o=c.grid.cols.length>0;$.each(c.p.colModel,function(a){if(this.hidden===!1&&!this.fixed){d=this.widthOrg?this.widthOrg:parseInt(this.width,10),d=Math.round(k*d/(c.p.tblwidth-f*h-l));if(d<0)return;this.width=d,e+=d,c.grid.headers[a].width=d,c.grid.headers[a].el.style.width=d+"px",c.p.footerrow&&(c.grid.footers[a].style.width=d+"px"),o&&(c.grid.cols[a].style.width=d+"px"),g=a}}),n=0,i?a-l-(e+f*h)!==j&&(n=a-l-(e+f*h)-j):Math.abs(a-l-(e+f*h))!==1&&(n=a-l-(e+f*h)),c.p.colModel[g].width+=n,c.p.tblwidth=e+n+f*h+l;if(c.p.tblwidth>a){var p=c.p.tblwidth-parseInt(a,10);c.p.tblwidth=a,d=c.p.colModel[g].width=c.p.colModel[g].width-p}else d=c.p.colModel[g].width;c.grid.headers[g].width=d,c.grid.headers[g].el.style.width=d+"px",o&&(c.grid.cols[g].style.width=d+"px"),c.p.footerrow&&(c.grid.footers[g].style.width=d+"px")}c.p.tblwidth&&($("table:first",c.grid.bDiv).css("width",c.p.tblwidth+"px"),$("table:first",c.grid.hDiv).css("width",c.p.tblwidth+"px"),c.grid.hDiv.scrollLeft=c.grid.bDiv.scrollLeft,c.p.footerrow&&$("table:first",c.grid.sDiv).css("width",c.p.tblwidth+"px"))}})},setGridHeight:function(a){return this.each(function(){var b=this;!b.grid||($(b.grid.bDiv).css({height:a+(isNaN(a)?"":"px")}),b.p.height=a,b.p.scroll&&b.grid.populateVisible())})},setCaption:function(a){return this.each(function(){this.p.caption=a,$("span.ui-jqgrid-title",this.grid.cDiv).html(a),$(this.grid.cDiv).show()})},setLabel:function(a,b,c,d){return this.each(function(){var e=this,f=-1;if(!!e.grid){if(typeof a!="undefined")$(e.p.colModel).each(function(b){if(this.name==a){f=b;return!1}});else return;if(f>=0){var g=$("tr.ui-jqgrid-labels th:eq("+f+")",e.grid.hDiv);if(b){var h=$(".s-ico",g);$("[id^=jqgh_]",g).empty().html(b).append(h),e.p.colNames[f]=b}c&&(typeof c=="string"?$(g).addClass(c):$(g).css(c)),typeof d=="object"&&$(g).attr(d)}}})},setCell:function(a,b,c,d,e,f){return this.each(function(){var g=this,h=-1,i,j;if(!!g.grid){isNaN(b)?$(g.p.colModel).each(function(a){if(this.name==b){h=a;return!1}}):h=parseInt(b,10);if(h>=0){var k=g.rows.namedItem(a);if(k){var l=$("td:eq("+h+")",k);if(c!==""||f===!0){i=g.formatter(a,c,h,k,"edit"),j=g.p.colModel[h].title?{title:$.jgrid.stripHtml(i)}:{},g.p.treeGrid&&$(".tree-wrap",$(l)).length>0?$("span",$(l)).html(i).attr(j):$(l).html(i).attr(j);if(g.p.datatype=="local"){var m=g.p.colModel[h],n;c=m.formatter&&typeof m.formatter=="string"&&m.formatter=="date"?$.unformat.date(c,m):c,n=g.p._index[a],typeof n!="undefined"&&(g.p.data[n][m.name]=c)}}typeof d=="string"?$(l).addClass(d):d&&$(l).css(d),typeof e=="object"&&$(l).attr(e)}}}})},getCell:function(a,b){var c=!1;this.each(function(){var d=this,e=-1;if(!!d.grid){isNaN(b)?$(d.p.colModel).each(function(a){if(this.name===b){e=a;return!1}}):e=parseInt(b,10);if(e>=0){var f=d.rows.namedItem(a);if(f)try{c=$.unformat($("td:eq("+e+")",f),{rowId:f.id,colModel:d.p.colModel[e]},e)}catch(g){c=$.jgrid.htmlDecode($("td:eq("+e+")",f).html())}}}});return c},getCol:function(a,b,c){var d=[],e,f=0,g=0,h=0,i;b=typeof b!="boolean"?!1:b,typeof c=="undefined"&&(c=!1),this.each(function(){var j=this,k=-1;if(!!j.grid){isNaN(a)?$(j.p.colModel).each(function(b){if(this.name===a){k=b;return!1}}):k=parseInt(a,10);if(k>=0){var l=j.rows.length,m=0;if(l&&l>0){while(m<l){if($(j.rows[m]).hasClass("jqgrow")){try{e=$.unformat($(j.rows[m].cells[k]),{rowId:j.rows[m].id,colModel:j.p.colModel[k]},k)}catch(n){e=$.jgrid.htmlDecode(j.rows[m].cells[k].innerHTML)}c?(i=parseFloat(e),f+=i,g=Math.min(g,i),h=Math.max(g,i)):b?d.push({id:j.rows[m].id,value:e}):d.push(e)}m++}if(c)switch(c.toLowerCase()){case"sum":d=f;break;case"avg":d=f/l;break;case"count":d=l;break;case"min":d=g;break;case"max":d=h}}}}});return d},clearGridData:function(a){return this.each(function(){var b=this;if(!!b.grid){typeof a!="boolean"&&(a=!1);if(b.p.deepempty)$("#"+$.jgrid.jqID(b.p.id)+" tbody:first tr:gt(0)").remove();else{var c=$("#"+$.jgrid.jqID(b.p.id)+" tbody:first tr:first")[0];$("#"+$.jgrid.jqID(b.p.id)+" tbody:first").empty().append(c)}b.p.footerrow&&a&&$(".ui-jqgrid-ftable td",b.grid.sDiv).html("&#160;"),b.p.selrow=null,b.p.selarrrow=[],b.p.savedRow=[],b.p.records=0,b.p.page=1,b.p.lastpage=0,b.p.reccount=0,b.p.data=[],b.p._index={},b.updatepager(!0,!1)}})},getInd:function(a,b){var c=!1,d;this.each(function(){d=this.rows.namedItem(a),d&&(c=b===!0?d:d.rowIndex)});return c},bindKeys:function(a){var b=$.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:!0},a||{});return this.each(function(){var a=this;$("body").is("[role]")||$("body").attr("role","application"),a.p.scrollrows=b.scrollingRows,$(a).keydown(function(c){var d=$(a).find("tr[tabindex=0]")[0],e,f,g,h=a.p.treeReader.expanded_field;if(d){g=a.p._index[d.id];if(c.keyCode===37||c.keyCode===38||c.keyCode===39||c.keyCode===40){if(c.keyCode===38){f=d.previousSibling,e="";if(f)if($(f).is(":hidden"))while(f){f=f.previousSibling;if(!$(f).is(":hidden")&&$(f).hasClass("jqgrow")){e=f.id;break}}else e=f.id;$(a).jqGrid("setSelection",e)}if(c.keyCode===40){f=d.nextSibling,e="";if(f)if($(f).is(":hidden"))while(f){f=f.nextSibling;if(!$(f).is(":hidden")&&$(f).hasClass("jqgrow")){e=f.id;break}}else e=f.id;$(a).jqGrid("setSelection",e)}c.keyCode===37&&(a.p.treeGrid&&a.p.data[g][h]&&$(d).find("div.treeclick").trigger("click"),$.isFunction(b.onLeftKey)&&b.onLeftKey.call(a,a.p.selrow)),c.keyCode===39&&(a.p.treeGrid&&!a.p.data[g][h]&&$(d).find("div.treeclick").trigger("click"),$.isFunction(b.onRightKey)&&b.onRightKey.call(a,a.p.selrow))}else c.keyCode===13?$.isFunction(b.onEnter)&&b.onEnter.call(a,a.p.selrow):c.keyCode===32&&$.isFunction(b.onSpace)&&b.onSpace.call(a,a.p.selrow)}})})},unbindKeys:function(){return this.each(function(){var a=this;$(a).unbind("keydown")})},getLocalRow:function(a){var b=!1,c;this.each(function(){typeof a!="undefined"&&(c=this.p._index[a],c>=0&&(b=this.p.data[c]))});return b}})})(jQuery)