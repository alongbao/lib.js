var xmlJsonClass={xml2json:function(a,b){a.nodeType===9&&(a=a.documentElement);var c=this.removeWhite(a),d=this.toObj(c),e=this.toJson(d,a.nodeName,"\t");return"{\n"+b+(b?e.replace(/\t/g,b):e.replace(/\t|\n/g,""))+"\n}"},json2xml:function(a,b){var c=function(a,b,d){var e="",f,g;if(a instanceof Array)if(a.length===0)e+=d+"<"+b+">__EMPTY_ARRAY_</"+b+">\n";else for(f=0,g=a.length;f<g;f+=1){var h=d+c(a[f],b,d+"\t")+"\n";e+=h}else if(typeof a=="object"){var i=!1;e+=d+"<"+b;var j;for(j in a)a.hasOwnProperty(j)&&(j.charAt(0)==="@"?e+=" "+j.substr(1)+'="'+a[j].toString()+'"':i=!0);e+=i?">":"/>";if(i){for(j in a)a.hasOwnProperty(j)&&(j==="#text"?e+=a[j]:j==="#cdata"?e+="<![CDATA["+a[j]+"]]>":j.charAt(0)!=="@"&&(e+=c(a[j],j,d+"\t")));e+=(e.charAt(e.length-1)==="\n"?d:"")+"</"+b+">"}}else typeof a=="function"?e+=d+"<"+b+">"+"<![CDATA["+a+"]]>"+"</"+b+">":a.toString()==='""'||a.toString().length===0?e+=d+"<"+b+">__EMPTY_STRING_</"+b+">":e+=d+"<"+b+">"+a.toString()+"</"+b+">";return e},d="",e;for(e in a)a.hasOwnProperty(e)&&(d+=c(a[e],e,""));return b?d.replace(/\t/g,b):d.replace(/\t|\n/g,"")},toObj:function(a){var b={},c=/function/i;if(a.nodeType===1){if(a.attributes.length){var d;for(d=0;d<a.attributes.length;d+=1)b["@"+a.attributes[d].nodeName]=(a.attributes[d].nodeValue||"").toString()}if(a.firstChild){var e=0,f=0,g=!1,h;for(h=a.firstChild;h;h=h.nextSibling)h.nodeType===1?g=!0:h.nodeType===3&&h.nodeValue.match(/[^ \f\n\r\t\v]/)?e+=1:h.nodeType===4&&(f+=1);if(g)if(e<2&&f<2){this.removeWhite(a);for(h=a.firstChild;h;h=h.nextSibling)h.nodeType===3?b["#text"]=this.escape(h.nodeValue):h.nodeType===4?c.test(h.nodeValue)?b[h.nodeName]=[b[h.nodeName],h.nodeValue]:b["#cdata"]=this.escape(h.nodeValue):b[h.nodeName]?b[h.nodeName]instanceof Array?b[h.nodeName][b[h.nodeName].length]=this.toObj(h):b[h.nodeName]=[b[h.nodeName],this.toObj(h)]:b[h.nodeName]=this.toObj(h)}else a.attributes.length?b["#text"]=this.escape(this.innerXml(a)):b=this.escape(this.innerXml(a));else if(e)a.attributes.length?b["#text"]=this.escape(this.innerXml(a)):(b=this.escape(this.innerXml(a)),b==="__EMPTY_ARRAY_"?b="[]":b==="__EMPTY_STRING_"&&(b=""));else if(f)if(f>1)b=this.escape(this.innerXml(a));else for(h=a.firstChild;h;h=h.nextSibling){if(c.test(a.firstChild.nodeValue)){b=a.firstChild.nodeValue;break}b["#cdata"]=this.escape(h.nodeValue)}}!a.attributes.length&&!a.firstChild&&(b=null)}else a.nodeType===9?b=this.toObj(a.documentElement):alert("unhandled node type: "+a.nodeType);return b},toJson:function(a,b,c,d){d===undefined&&(d=!0);var e=b?'"'+b+'"':"",f="\t",g="\n";d||(f="",g="");if(a==="[]")e+=b?":[]":"[]";else if(a instanceof Array){var h,i,j=[];for(i=0,h=a.length;i<h;i+=1)j[i]=this.toJson(a[i],"",c+f,d);e+=(b?":[":"[")+(j.length>1?g+c+f+j.join(","+g+c+f)+g+c:j.join(""))+"]"}else if(a===null)e+=(b&&":")+"null";else if(typeof a=="object"){var k=[],l;for(l in a)a.hasOwnProperty(l)&&(k[k.length]=this.toJson(a[l],l,c+f,d));e+=(b?":{":"{")+(k.length>1?g+c+f+k.join(","+g+c+f)+g+c:k.join(""))+"}"}else typeof a=="string"?e+=(b&&":")+'"'+a.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"':e+=(b&&":")+'"'+a.toString()+'"';return e},innerXml:function(a){var b="";if("innerHTML"in a)b=a.innerHTML;else{var c=function(a){var b="",d;if(a.nodeType===1){b+="<"+a.nodeName;for(d=0;d<a.attributes.length;d+=1)b+=" "+a.attributes[d].nodeName+'="'+(a.attributes[d].nodeValue||"").toString()+'"';if(a.firstChild){b+=">";for(var e=a.firstChild;e;e=e.nextSibling)b+=c(e);b+="</"+a.nodeName+">"}else b+="/>"}else a.nodeType===3?b+=a.nodeValue:a.nodeType===4&&(b+="<![CDATA["+a.nodeValue+"]]>");return b};for(var d=a.firstChild;d;d=d.nextSibling)b+=c(d)}return b},escape:function(a){return a.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(a){a.normalize();var b;for(b=a.firstChild;b;)if(b.nodeType===3)if(!b.nodeValue.match(/[^ \f\n\r\t\v]/)){var c=b.nextSibling;a.removeChild(b),b=c}else b=b.nextSibling;else b.nodeType===1?(this.removeWhite(b),b=b.nextSibling):b=b.nextSibling;return a}}